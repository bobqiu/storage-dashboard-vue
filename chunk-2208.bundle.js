(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2208"],{"05dc":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("file-acl",{attrs:{aclData:e.groupACLList,userAcl:e.userACLList}},[s("div",{staticClass:"section-separator",attrs:{slot:"groupTitle"},slot:"groupTitle"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[e._v(e._s(e.$t("STORAGE.ACL_USER_GROUP")))])])]),s("div",{staticClass:"section-separator",attrs:{slot:"userTitle"},slot:"userTitle"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[e._v("User")])])])]),s("Button",{staticClass:"pull-right button-reset",attrs:{type:"primary"},on:{click:function(t){e.ACLsubmitForm()}}},[e._v(e._s(e.$t("STORAGE.SAVE_PERMISSIONS")))])],1)},n=[],r=(s("20d6"),s("6762"),s("2fdb"),s("a481"),s("8afe")),a=(s("96cf"),s("3040")),c=s("ff66"),o=s("7265"),l=s("c6e4"),u={components:{fileAcl:l["a"]},props:["bucket","filePrefix","itemKey"],data:function(){return{self:this,groupACLList:[],userACLList:[],owner:this.owner,iconSize:16}},computed:{prefix:function(){return this.filePrefix+this.itemKey},breadcrumb:function(){return Object(o["f"])(this.prefix)}},created:function(){this.getACLList()},methods:{getACLList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$Loading.start(),e.prev=1,e.next=4,Object(c["d"])("getObjectAcl",{Bucket:this.bucket,Key:this.prefix});case 4:t=e.sent,this.groupACLList=d(t.Grants)[0],this.userACLList=d(t.Grants)[1],this.Data={bucket:this.bucket,grants:t.Grants,owner:t.Owner},this.owner=t.Owner.ID,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$Message.error(this.$t("STORAGE.GET_PERMISSION_FAILED"));case 14:this.$Loading.finish();case 15:case"end":return e.stop()}},e,this,[[1,11]])}));return function(){return e.apply(this,arguments)}}(),ACLsubmitForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$Loading.start(),t=Object(r["a"])(this.groupACLList).concat(Object(r["a"])(this.userACLList)),s=_.cloneDeep(t),i=s.map(function(e){return p(e)}),i=_.filter(i,function(e){return e.Permission=m(e.Permission),e.Permission.length>0}),0!==i.length){e.next=8;break}return this.$Message.error(this.$t("STORAGE.PERMISSION_EMPTY")),e.abrupt("return",!1);case 8:return n={Bucket:this.bucket,Key:this.prefix,AccessControlPolicy:{Grants:i,Owner:this.Data.owner}},e.prev=9,e.next=12,Object(c["d"])("putObjectAcl",n);case 12:this.$Message.success(this.$t("STORAGE.PERMISSION_SUCCESS")),this.$emit("permissionSuccess"),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](9),this.$Message.error(this.$t("STORAGE.PERMISSION_FAILED"));case 19:this.$Loading.finish();case 20:case"end":return e.stop()}},e,this,[[9,16]])}));return function(){return e.apply(this,arguments)}}(),getUrl:function(e){return"/bucket/".concat(this.bucket,"/prefix/").concat(e.replace("/","%2F"))}}},p=function(e){var t={};return e.GranteeOrigin?t={Grantee:e.GranteeOrigin,Permission:e.Access}:(t.Grantee=e.Grantee.includes("@")?{Type:"AmazonCustomerByEmail",EmailAddress:e.Grantee}:{Type:"CanonicalUser",ID:e.Grantee},t.Permission=e.Access),t},d=function(e){var t=[],s=_.cloneDeep(w);if(e.length){var i=[];_.each(e,function(e){if(e.Grantee.URI&&"http://acs.amazonaws.com/groups/global/AllUsers"===e.Grantee.URI)f(s[0],e.Permission),s[0].GranteeOrigin=e.Grantee;else if("CanonicalUser"===e.Grantee.Type||e.Grantee.URI&&"http://acs.amazonaws.com/groups/global/AuthenticatedUsers"===e.Grantee.URI)f(s[1],e.Permission),s[1].GranteeOrigin=e.Grantee;else if(e.Grantee.ID){var n=e.Grantee.ID,r=i.findIndex(function(e){return e===n});if(i.includes(n))f(t[r],e.Permission);else{var a=h(e);f(a,e.Permission),t.push(a),i.push(n)}}})}return[s,t]},h=function(e){return{GranteeType:e.Grantee.Type,GranteeOrigin:e.Grantee,Grantee:e.Grantee.ID||e.Grantee.EmailAddress,Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}}},f=function(e,t){"FULL_CONTROL"===t?e.Access={Read:!0,ReadAcp:!0,WriteAcp:!0}:e.Access[b[t]]=!0},m=function(e){var t=[];return _.each(e,function(e,s){e&&"Write"!==s&&t.push(v[s])}),t.join(",")},b={READ:"Read",WRITE:"Write",READ_ACP:"ReadAcp",WRITE_ACP:"WriteAcp"},v={Read:"READ",Write:"WRITE",ReadAcp:"READ_ACP",WriteAcp:"WRITE_ACP"},w=[{GranteeType:"Group",Grantee:"AllUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1},GranteeOrigin:{Type:"Group",URI:"http://acs.amazonaws.com/groups/global/AllUsers"}},{GranteeType:"Group",Grantee:"AuthenticatedUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1},GranteeOrigin:{Type:"Group",URI:"http://acs.amazonaws.com/groups/global/AuthenticatedUsers"}}],y=u,A=(s("d9b5"),s("2877")),x=Object(A["a"])(y,i,n,!1,null,null,null);x.options.__file="FilePermissions.vue";t["default"]=x.exports},"0e7f":function(e,t,s){},"1f90":function(e,t,s){"use strict";var i=s("259d"),n=s.n(i);n.a},"259d":function(e,t,s){},"3c9b":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bsc-file",on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;""!==e.searchValue&&e.searchFile(e.searchValue)}}},[s("div",{staticClass:"layout-bsc-toolbar"},[s("a",{staticClass:"btn-back",on:{click:function(t){e.back()}}},[s("Icon",{attrs:{type:"chevron-left"}})],1),s("bsc-breadcrumb",[s("bsc-breadcrumb-item",{attrs:{href:e.bucketPath}},[e._v(e._s(e.$t("STORAGE.TITLE")))]),s("bsc-breadcrumb-item",{attrs:{href:e.getUrl("noprefix")}},[e._v(e._s(e.bucket))]),e._l(e.breadcrumb,function(t){return s("bsc-breadcrumb-item",{key:t.text,attrs:{href:e.getUrl(t.prefix)}},[e._v(e._s(t.text))])})],2)],1),s("Row",{staticClass:"toolbar-nav"},[s("Col",{attrs:{span:"10"}},[s("div",[s("Button",{directives:[{name:"show",rawName:"v-show",value:e.canUpload,expression:"canUpload"}],attrs:{type:"primary"},on:{click:e.openUploadModal}},[e._v(e._s(e.$t("STORAGE.UPLOAD_FILE")))]),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.canUpload,expression:"canUpload"}],attrs:{type:"primary"},on:{click:function(t){e.createFolderModal=!0}}},[e._v(e._s(e.$t("STORAGE.CREATE_FOLDER")))]),s("Tooltip",{attrs:{content:"功能维护，暂停使用",placement:"bottom"}},[s("Button",{attrs:{type:"primary",disabled:""}},[e._v(e._s(e.$t("STORAGE.DOWNLOAD_FILES")))])],1),s("Button",{attrs:{disabled:!e.selectedFileList.length>0},on:{click:e.batchDeleteFileConfirm}},[e._v(e._s(e.$t("STORAGE.DELETE_FILES")))]),e.showSearch?e._e():s("Button",{attrs:{type:"primary"},on:{click:function(t){e.showSearch=!0}}},[e._v("查找文件")]),s("transition",{attrs:{name:"slide-fade"}},[e.showSearch?s("div",{staticClass:"section-search"},[s("span",{staticClass:"bsc-input"},[s("input",{staticClass:"input-append-before",attrs:{type:"text",disabled:""},domProps:{value:e.prefix}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],attrs:{type:"text"},domProps:{value:e.searchValue},on:{focus:function(t){e.searchInputFocus=!0},input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),s("Button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.searchFile(e.searchValue)}}},[s("Icon",{attrs:{type:"search",size:e.iconSize}})],1)],1)]):e._e()])],1)]),s("Col",{staticStyle:{"text-align":"right"},attrs:{span:"14"}},[s("legend-list",{attrs:{data:e.legendList}})],1)],1),e.spinShow?s("Spin",{attrs:{size:"bigger",fix:""}}):e._e(),s("Modal",{model:{value:e.copyModal,callback:function(t){e.copyModal=t},expression:"copyModal"}},[s("div",{staticStyle:{"text-align":"left"}},[e._v("\n      "+e._s(e.$t("STORAGE.COPY_LINK_CONFIRM",{selectedFileKey:e.selectedFileKey}))+"\n    ")]),s("div",{staticClass:"copy-modal-footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text"},on:{click:function(t){e.copyModal=!1}}},[s("span",[e._v(e._s(e.$t("PUBLIC.CANCLE")))])]),s("Button",{directives:[{name:"clip",rawName:"v-clip"}],attrs:{type:"info","data-clipboard-text":e.clipUrl},on:{click:function(t){e.copyAction()}}},[e._v(e._s(e.$t("PUBLIC.COPY")))])],1)]),s("Modal",{attrs:{title:e.$t("STORAGE.ADD_FOLDER")},on:{"on-ok":e.addFolder,"on-cancel":function(t){e.createFolderValue=""}},model:{value:e.createFolderModal,callback:function(t){e.createFolderModal=t},expression:"createFolderModal"}},[s("Input",{attrs:{placeholder:e.$t("STORAGE.FOLDER_PLACEHOLDER")},on:{"on-enter":e.addFolder},model:{value:e.createFolderValue,callback:function(t){e.createFolderValue=t},expression:"createFolderValue"}})],1),s("Modal",{attrs:{title:e.$t("STORAGE.RENAME")},on:{"on-ok":e.rename,"on-cancel":function(t){e.renameKey=""}},model:{value:e.renameModal,callback:function(t){e.renameModal=t},expression:"renameModal"}},[s("Input",{attrs:{placeholder:e.$t("STORAGE.RENAME_PLACEHOLDER")},on:{"on-enter":e.rename},model:{value:e.renameKey,callback:function(t){e.renameKey=t},expression:"renameKey"}})],1),s("Modal",{attrs:{title:e.imageModalTitle,width:"900"},model:{value:e.showImageModal,callback:function(t){e.showImageModal=t},expression:"showImageModal"}},[s("div",{staticClass:"section-img"},[s("img",{attrs:{src:e.clipUrl}})]),s("div",{attrs:{slot:"footer"},slot:"footer"})]),s("Modal",{attrs:{"mask-closable":e.uploadModalMaskClosable,title:e.$t("STORAGE.UPLOAD_FLIE"),width:"700"},on:{"on-cancel":e.uploadModalClose},model:{value:e.uploadModal,callback:function(t){e.uploadModal=t},expression:"uploadModal"}},[s("RadioGroup",{model:{value:e.aclType,callback:function(t){e.aclType=t},expression:"aclType"}},[s("Radio",{attrs:{label:"authenticated-read"}},[e._v(e._s(e.$t("STORAGE.AUTHENTICATED_READ")))]),s("Radio",{attrs:{label:"public-read"}},[e._v(e._s(e.$t("STORAGE.PUBULIC_READ")))])],1),s("upload",{ref:"upload",staticStyle:{"margin-top":"15px"},attrs:{bucket:e.bucket,prefix:e.prefix,"acl-type":e.aclType}}),s("div",{attrs:{slot:"footer"},slot:"footer"})],1),s("Modal",{attrs:{title:e.$t("STORAGE.FILE_PERMISSIONS"),width:"700"},model:{value:e.showPermissonModal,callback:function(t){e.showPermissonModal=t},expression:"showPermissonModal"}},[e.showPermissonModal?s("file-permission",{attrs:{bucket:e.bucket,filePrefix:e.prefix,itemKey:e.permissionKey,"show-modal":e.showPermissonModal},on:{permissionSuccess:function(t){e.showPermissonModal=!1}}}):e._e(),s("div",{staticClass:"copy-modal-footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{staticStyle:{visibility:"hidden"},attrs:{type:"primary"}},[e._v(e._s(e.$t("STORAGE.SAVE_PERMISSIONS")))])],1)],1),e._m(0),s("Table",{attrs:{"show-header":e.showHeader,stripe:!0,context:e.self,columns:e.fileHeader,data:e.fileList,"no-data-text":e.$t("STORAGE.NO_FILE")},on:{"on-selection-change":e.select}}),s("div",{staticClass:"section-paging"},[s("div",[s("Tag",[e._v(e._s(e.fileList.length)+" files or folders in this page")])],1),s("div",[s("Button",{directives:[{name:"show",rawName:"v-show",value:e.makerArray.length>0,expression:"makerArray.length > 0"}],attrs:{type:"ghost",size:"small"},on:{click:function(t){e.getData("",e.searchValue),e.makerArray.length=0}}},[e._v(e._s(e.$t("PUBLIC.PAGE_FIRST")))]),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.makerArray.length>0,expression:"makerArray.length > 0"}],attrs:{type:"ghost",size:"small"},on:{click:function(t){e.previousPage()}}},[e._v(e._s(e.$t("PUBLIC.PAGE_PREV")))]),s("Button",{directives:[{name:"show",rawName:"v-show",value:e.nextMarker,expression:"nextMarker"}],attrs:{type:"ghost",size:"small"},on:{click:function(t){e.nextPage()}}},[e._v(e._s(e.$t("PUBLIC.PAGE_NEXT")))])],1)]),!0===e.showPicturePreview?s("picture-preview",{attrs:{selectedIndex:e.selectedIndex,fileList:e.fileList,bucket:e.bucket,prefix:e.prefix},on:{close:function(t){e.showPicturePreview=!1}}}):e._e()],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticStyle:{display:"none"},attrs:{download:"",id:"element-download"}},[s("span",{attrs:{id:"span-download"}})])}],r=(s("28a5"),s("7514"),s("a481"),s("ac6a"),s("96cf"),s("3040")),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bsc-picture-preview"},[s("div",{staticClass:"content"},[s("div",{staticClass:"close-preview",on:{click:e.close}},[s("Icon",{attrs:{type:"close",size:"50"}})],1),s("div",{staticClass:"picture-show-box"},[e.spinShow?s("Spin",{attrs:{size:"bigger",fix:""}}):e._e(),s("img",{staticClass:"box-picture",attrs:{src:e.pictureUrl},on:{load:function(t){e.adaptPage(),e.spinShow=!1}}})],1)]),s("div",{staticClass:"right-gallery-list"},e._l(e.pictureUrlList,function(t,i){return s("p",{key:t,staticClass:"gallery-list-item",on:{click:function(s){e.changePicture(t,i)}}},[s("img",{staticClass:"gallery-list-img",attrs:{src:t}})])})),s("div",{staticClass:"bottom-gallery-details"},[s("div",{staticClass:"details-number"},[e._v(e._s(e.selectedPictureIndex)+" / "+e._s(e.pictureNumber))]),s("div",{staticClass:"details-actions"},[s("Tooltip",{staticClass:"actions-icon",attrs:{content:"放大",placement:"top"}},[s("div",{on:{click:function(t){e.larger()}}},[s("Icon",{attrs:{type:"plus",size:"28"}})],1)]),s("Tooltip",{staticClass:"actions-icon",attrs:{content:"缩小",placement:"top"}},[s("div",{on:{click:function(t){e.smaller()}}},[s("Icon",{attrs:{type:"minus",size:"28"}})],1)]),s("Tooltip",{staticClass:"actions-icon",attrs:{content:"实际大小",placement:"top"}},[s("div",{on:{click:function(t){e.actualSize()}}},[s("Icon",{attrs:{type:"android-contract",size:"28"}})],1)]),s("Tooltip",{staticClass:"actions-icon",attrs:{content:"适应页面",placement:"top"}},[s("div",{on:{click:function(t){e.adaptPage()}}},[s("Icon",{attrs:{type:"android-expand",size:"28"}})],1)]),s("Tooltip",{staticClass:"actions-icon",attrs:{content:"下载原图",placement:"top"}},[s("div",{on:{click:function(t){e.download()}}},[s("Icon",{attrs:{type:"ios-cloud-download",size:"28"}})],1)])],1)]),e._m(0)])},c=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticStyle:{display:"none"},attrs:{download:"",id:"element-download"}},[s("span",{attrs:{id:"span-download"}})])}],o=s("ff66"),l=void 0,u={props:["selectedIndex","fileList","bucket","prefix"],data:function(){return{pictureUrlList:[],pictureUrl:this.pictureUrl,pictureNumber:0,selectedPictureIndex:0,width:0,height:0,spinShow:!0}},watch:{width:function(e){e>=5e3?$(".actions-icon:eq(0)").addClass("disable"):$(".actions-icon:eq(0)").removeClass("disable"),e<=120?$(".actions-icon:eq(1)").addClass("disable"):$(".actions-icon:eq(1)").removeClass("disable"),e===this.computeActualSize()?$(".actions-icon:eq(2)").addClass("disable"):$(".actions-icon:eq(2)").removeClass("disable"),e.toFixed()===(this.computeActualSize()>1280?(.7*$(".picture-show-box, .big-picture-show-box").width()).toFixed():this.computeActualSize().toFixed())?$(".actions-icon:eq(3)").addClass("disable"):$(".actions-icon:eq(3)").removeClass("disable"),e<$(".picture-show-box, .big-picture-show-box").width()&&this.height<$(".picture-show-box, .big-picture-show-box").height()?$(".picture-show-box, .big-picture-show-box").addClass("picture-show-box").removeClass("big-picture-show-box"):$(".picture-show-box, .big-picture-show-box").addClass("big-picture-show-box").removeClass("picture-show-box")},height:function(e){this.width<$(".picture-show-box, .big-picture-show-box").width()&&e<$(".picture-show-box, .big-picture-show-box").height()?$(".picture-show-box, .big-picture-show-box").addClass("picture-show-box").removeClass("big-picture-show-box"):$(".picture-show-box, .big-picture-show-box").addClass("big-picture-show-box").removeClass("picture-show-box")}},created:function(){document.addEventListener("keydown",this.EscClose),this.getUrlList()},methods:{getUrlList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=0,this.fileList.forEach(function(e,i){e.isImage&&!0===e.isImage&&(t+=1,i===s.selectedIndex&&(s.selectedPictureIndex=t))}),this.pictureUrlList.length=this.pictureNumber=t,e.next=5,p(this.bucket,this.fileList[this.selectedIndex],this.prefix);case 5:return this.pictureUrl=e.sent,$(".gallery-list-item:eq(".concat(this.selectedPictureIndex-1,")")).addClass("active"),e.next=9,Promise.all(Array.map(this.fileList.filter(function(e){return e.isImage&&!0===e.isImage}),function(e){return p(s.bucket,e,s.prefix)}));case 9:this.pictureUrlList=e.sent;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changePicture:function(e,t){this.pictureUrl=e,this.selectedPictureIndex=t+1,$(".gallery-list-item").removeClass("active"),$(".gallery-list-item:eq(".concat(t,")")).addClass("active"),this.adaptPage()},computeActualSize:function(){var e=new Image;return e.src=this.pictureUrl,e.width},EscClose:function(e){27===e.keyCode&&this.close()},close:function(){this.$emit("close")},larger:function(){var e=$(".box-picture").width();$(".box-picture").width(this.width=e>=5e3?e:1.25*e),this.height=$(".box-picture").height()},smaller:function(){var e=$(".box-picture").width();$(".box-picture").width(this.width=e<=120?e:.8*e),this.height=$(".box-picture").height()},actualSize:function(){$(".box-picture").width(this.width=this.computeActualSize()),this.height=$(".box-picture").height()},adaptPage:function(){var e=this.computeActualSize();$(".box-picture").width(e>1280?"70%":e),this.width=$(".box-picture").width(),this.height=$(".box-picture").height()},download:function(){document.querySelector("#element-download").href=this.pictureUrl,document.querySelector("#span-download").click()}}},p=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,i){var n,r,a,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={Bucket:t,Key:i+s.Key},e.next=4,Object(o["c"])();case 4:return r=e.sent,e.next=7,r.getSignedUrl("getObject",n);case 7:return a=e.sent,e.next=10,Object(o["d"])("getObjectAcl",n);case 10:return c=e.sent,u=_.find(c.Grants,function(e){return e.Grantee.URI&&"http://acs.amazonaws.com/groups/global/AllUsers"===e.Grantee.URI}),e.abrupt("return",u?a.split("?")[0]:a);case 15:return e.prev=15,e.t0=e["catch"](0),l.$Loading.error(),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t,s,i){return e.apply(this,arguments)}}(),d=u,h=(s("a515"),s("2877")),f=Object(h["a"])(d,a,c,!1,null,"e47e3604",null);f.options.__file="picturePreview.vue";var m=f.exports,b=s("7265"),v=s("acc6"),w=s("36fa"),y=s("0ddc"),A=s.n(y),x=s("4360"),g=s("7340"),E=s("e9b8"),R=s("c1df"),S=s.n(R),k=s("05dc"),O=void 0,I={components:{filePermission:k["default"],bscBreadcrumb:v["a"],bscBreadcrumbItem:v["a"].Item,upload:w["a"],legendList:E["a"],picturePreview:m},directives:{clip:{bind:function(e){new A.a(e)}}},data:function(){var e=this;return{clipUrl:"",showPicturePreview:!1,selectedIndex:0,searchValue:"",copyModal:!1,nextMarker:"",makerArray:[],showImageModal:!1,showPermissonModal:!1,createFolderModal:!1,renameModal:!1,searchMode:!1,uploadModal:!1,aclType:"authenticated-read",uploadModalMaskClosable:!1,createFolderValue:"",selectedFileKey:"",showSearch:!1,renameKey:"",selectedFileList:[],legendList:[{icon:"compose",text:"STORAGE.RENAME"},{icon:"gear-a",text:"STORAGE.FILE_PERMISSIONS"},{icon:"ios-cloud-download",text:"SETTINGS.DOWNLOAD"},{icon:"eye",text:"STORAGE.IMG_PREVIEW"},{icon:"link",text:"PUBLIC.COPY"},{icon:"ios-trash",text:"PUBLIC.DELETE"}],inputCheck:!1,fileList:[],self:this,showHeader:!0,iconSize:18,spinShow:!0,fileHeader:[{type:"selection",width:"58px",align:"center"},{title:"Key",key:"Key",ellipsis:!0,sortable:!0,render:function(t,s){return t("div",{on:{click:function(){"file"!==s.row.Type&&e.openFolder(s.row)}},style:{cursor:"file"===s.row.Type?"default":"pointer"}},[t("Icon",{props:{type:"file"===s.row.Type?"document":"folder",size:16},style:{position:"relative",top:"1px",paddingRight:"4px"}}),t("strong",{class:{"link-folder":"file"!==s.row.Type}},s.row.Key)])}},{title:"Size",width:"15%",align:"right",key:"convertSize"},{title:"Create time",key:"LastModified",align:"right",width:"25%",sortable:!0},{title:"Actions",key:"actions",width:"25%",align:"right",render:function(t,s){return"folder"===s.row.Type?t("Tooltip",{props:{content:e.$t("STORAGE.DELETE_FOLDER"),delay:1e3,placement:"top-end"},class:{"mar-r-5":!0}},[t("i-button",{props:{size:"small"},on:{click:function(){e.deleteFileConfirm(s.row)}}},[t("Icon",{props:{type:"ios-trash",size:e.iconSize}})])]):t("div",[t("Tooltip",{props:{content:e.$t("STORAGE.RENAME"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[t("i-button",{props:{size:"small"},on:{click:function(){e.selectedFileKey=s.row.Key,e.renameKey=s.row.Key,e.renameModal=!0}}},[t("Icon",{props:{type:"compose",size:e.iconSize}})])]),t("Tooltip",{props:{content:e.$t("STORAGE.FILE_PERMISSIONS"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[t("i-button",{props:{size:"small"},on:{click:function(){e.permissionModal(s.row)}}},[t("Icon",{props:{type:"gear-a",size:e.iconSize}})])]),t("Tooltip",{props:{content:e.$t("STORAGE.DOWNLOAD_FILE"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[t("i-button",{props:{size:"small"},on:{click:function(){e.downloadFile(s.row)}}},[t("Icon",{props:{type:"ios-cloud-download",size:e.iconSize}})])]),t("Tooltip",{props:{content:e.$t("STORAGE.IMG_PREVIEW"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[t("i-button",{props:{disabled:s.row&&!s.row.isImage,size:"small"},on:{click:function(){e.showPicturePreview=!0,e.selectedIndex=s.row._index}}},[t("Icon",{props:{type:"eye",size:e.iconSize}})])]),t("Tooltip",{props:{content:e.$t("STORAGE.COPY_FILE_LINK"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[t("i-button",{props:{size:"small"},on:{click:function(){e.clipModal(s.row)}}},[t("Icon",{props:{type:"link",size:e.iconSize}})])]),t("Tooltip",{props:{content:e.$t("STORAGE.DELETE_FILE"),delay:1e3,placement:"top"}},[t("i-button",{props:{size:"small"},on:{click:function(){e.deleteFileConfirm(s.row)}}},[t("Icon",{props:{type:"ios-trash",size:e.iconSize}})])])])}}],permissionKey:"",searchInputFocus:!1,canUpload:!1}},computed:{bucket:function(){return this.$route.params.bucket},prefix:function(){return"noprefix"===this.$route.params.prefix?"":this.$route.params.prefix},breadcrumb:function(){return Object(b["f"])(this.prefix)},bucketPath:function(){return"/bucket/".concat(this.$route.params.bucket)},imageModalTitle:function(){return this.selectedFileKey||this.$t("STORAGE.NO_TITLE")}},watch:{$route:function(e,t){e.path!==t.path&&this.getData()}},created:function(){this.getData(),this.checkCanUpload()},methods:{getData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,i,n,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:"",this.$Loading.start(),this.spinShow=!0,e.prev=3,i=this,e.next=7,Object(o["d"])("listObjects",{Bucket:this.bucket,Delimiter:"/",MaxKeys:100,Marker:t||this.prefix,Prefix:this.prefix+s});case 7:return n=e.sent,this.nextMarker=n.NextMarker,e.next=11,_.forEach(n.CommonPrefixes,function(e){e.Key=Object(b["j"])(e.Prefix,i.prefix),e.Type="folder",e.LastModified="",e.convertSize=""}).concat(_.forEach(n.Contents,function(e){e.Key=Object(b["j"])(e.Key,i.prefix),e.convertSize=Object(b["d"])(e.Size),e.Type="file",e.isImage=T(e),e.LastModified=S()(e.LastModified).format("YYYY-MM-DD HH:mm")}));case 11:this.fileList=e.sent,document.querySelector("#app").scrollTop=0,this.spinShow=!1,this.$Loading.finish(),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](3),this.spinShow=!1,this.$Loading.error();case 21:case"end":return e.stop()}},e,this,[[3,17]])}));return function(t){return e.apply(this,arguments)}}(),rename:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.renameModal=!1,!(this.renameKey.length>0)){e.next=19;break}if(this.selectedFileKey!==this.renameKey){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,this.$Loading.start(),e.next=8,Object(o["d"])("copyObject",{Bucket:this.bucket,CopySource:encodeURIComponent(this.bucket+"/"+this.prefix+this.selectedFileKey),Key:this.prefix+this.renameKey});case 8:return e.next=10,Object(o["d"])("deleteObject",{Bucket:this.bucket,Key:this.prefix+this.selectedFileKey});case 10:this.renameKey="",this.getData(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),this.$Loading.error();case 17:e.next=20;break;case 19:this.$Message.error(this.$t("STORAGE.RENAME_PLACEHOLDER"));case 20:case"end":return e.stop()}},e,this,[[4,14]])}));return function(){return e.apply(this,arguments)}}(),back:function(){this.$router.back()},previousPage:function(){var e=this.makerArray[this.makerArray.length-2];this.makerArray.pop(),this.getData(e,this.searchValue)},nextPage:function(){this.nextMarker&&this.makerArray.push(this.nextMarker),this.getData(this.nextMarker,this.searchValue)},searchFile:function(e){this.searchMode=!0,this.getData(this.prefix,e)},addFolder:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.createFolderValue){e.next=2;break}return e.abrupt("return");case 2:return this.createFolderModal=!1,e.prev=3,e.next=6,Object(o["d"])("putObject",{Bucket:this.bucket,Key:this.prefix+this.createFolderValue+"/",Body:""});case 6:this.$Message.success(this.$t("STORAGE.ADD_FOLDER_SUCCESS")),this.getData(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),this.$Message.error(this.$t("STORAGE.ADD_FOLDER_FAILED"));case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),clipModal:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$Loading.start(),e.next=3,L(this.bucket,t,this.prefix);case 3:this.clipUrl=e.sent,this.selectedFileKey=t.Key,this.copyModal=!0,this.$Loading.finish();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),openUploadModal:function(){this.uploadModal=!0},download:function(e){document.querySelector("#element-download").href=e,document.querySelector("#span-download").click()},downloadFile:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this,"file"!==t.Type){e.next=8;break}return e.next=4,L(this.bucket,t,this.prefix,!0);case 4:i=e.sent,this.download(i),e.next=12;break;case 8:return e.next=10,Object(o["d"])("listObjects",{Bucket:this.bucket,Prefix:this.prefix+t.Prefix,Delimiter:"/",Marker:this.prefix+t.Prefix});case 10:n=e.sent,_.each(n.Contents,function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L(s.bucket,t,s.prefix);case 2:i=e.sent,s.download(i);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),imageModal:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$Loading.start(),e.next=3,L(this.bucket,t,this.prefix);case 3:this.clipUrl=e.sent,this.selectedFileKey=t.Key,this.showImageModal=!0,this.$Loading.finish();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),permissionModal:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.permissionKey=t.Key,this.showPermissonModal=!0;case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),batchDeleteFileConfirm:function(){var e=this;this.$Modal.confirm({content:this.$t("STORAGE.DELETE_FILES_CONFIRMED"),okText:this.$t("PUBLIC.CONFIRMED"),cancelText:this.$t("PUBLIC.CANCLE"),title:this.$t("PUBLIC.DELETE"),onOk:function(){return e.batchDelete()}})},deleteFileConfirm:function(e){var t=this;this.$Modal.confirm({content:this.$t("STORAGE.DELETE_CONFIRMED",{fileName:e.Key}),okText:this.$t("PUBLIC.CONFIRMED"),cancelText:this.$t("PUBLIC.CANCLE"),title:this.$t("PUBLIC.DELETE"),onOk:function(){return t.deleteFile(e)}})},deleteFile:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"file"!==t.Type){e.next=6;break}return e.next=4,Object(o["d"])("deleteObject",{Bucket:this.bucket,Key:this.prefix+t.Key});case 4:e.next=7;break;case 6:this.deleteFolders(t);case 7:this.getData(),this.$Message.success(this.$t("STORAGE.DELETE_FILES_SUCCESS",{fileName:t.Key})),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),this.spinShow=!1,this.$Message.error(this.$t("STORAGE.DELETE_FILES_FAILED",{fileName:t.Key}));case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),deleteFolders:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var s,i,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=n.length>1&&void 0!==n[1]?n[1]:"",this.spinShow=!0,e.prev=2,e.next=5,Object(o["d"])("listObjects",{Bucket:this.bucket,Prefix:t.Prefix,MaxKeys:1e3,Marker:s});case 5:return i=e.sent,e.next=8,Object(o["d"])("deleteObjects",{Bucket:this.bucket,Delete:{Objects:i.Contents.map(function(e){return _.pick(e,"Key")})}});case 8:if(1e3!==i.Contents.length){e.next=12;break}this.deleteFolders(t,i.Contents[100].Key),e.next=15;break;case 12:return e.next=14,Object(o["d"])("deleteObject",{Bucket:this.bucket,Key:this.prefix+t.Key});case 14:this.spinShow=!1;case 15:e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](2),this.spinShow=!1,this.$Loading.error(),this.$Message.error("Delete the folder [".concat(t.Key,"] error"));case 22:case"end":return e.stop()}},e,this,[[2,17]])}));return function(t){return e.apply(this,arguments)}}(),batchDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,Promise.all(Array.map(t.selectedFileList,function(e){return t.deleteFile(e)}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),batchDownload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,Promise.all(Array.map(t.selectedFileList,function(e){return t.downloadFile(e)}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),openFolder:function(e){this.searchValue="",this.$router.push({name:"file",params:{bucket:this.bucket,prefix:e.Prefix}})},getUrl:function(e){return"/bucket/"+this.bucket+"/prefix/"+C(e,"/","%2F")},uploadModalClose:function(){this.getData(),this.$refs.upload.clearFiles()},checkCanUpload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(g["a"])("SUBUSER")){e.next=7;break}return e.next=3,Object(o["d"])("getBucketAcl",{Bucket:this.bucket});case 3:t=e.sent,_.each(t.Grants,function(e){e.Grantee.ID!==x["a"].state.current.username||"FULL_CONTROL"!==e.Permission&&"WRITE"!==e.Permission||(s.canUpload=!0)}),e.next=8;break;case 7:this.canUpload=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),select:function(e){this.selectedFileList=e},setLoading:function(e){this.$store.dispatch("setLoading",e)},copyAction:function(){this.copyModal=!1,this.$Message.success($t("STORAGE.COPIED"))}}},C=function(e,t,s){var i=e;while(i.indexOf(t)>0)i=i.replace(t,s);return i},T=function(e){return!!/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.Key)},L=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,s,i){var n,r,a,c,l,u,p,d=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>3&&void 0!==d[3]&&d[3],e.prev=1,r=n?{Bucket:t,Key:i+s.Key,ResponseContentDisposition:"attachment"}:{Bucket:t,Key:i+s.Key},a={Bucket:t,Key:i+s.Key},e.next=6,Object(o["c"])();case 6:return c=e.sent,e.next=9,c.getSignedUrl("getObject",r);case 9:return l=e.sent,e.next=12,Object(o["d"])("getObjectAcl",a);case 12:return u=e.sent,p=_.find(u.Grants,function(e){return e.Grantee.URI&&"http://acs.amazonaws.com/groups/global/AllUsers"===e.Grantee.URI}),e.abrupt("return",n?l:p?l.split("?")[0]:l);case 17:return e.prev=17,e.t0=e["catch"](1),O.$Loading.error(),e.abrupt("return",Promise.reject(e.t0));case 21:case"end":return e.stop()}},e,this,[[1,17]])}));return function(t,s,i){return e.apply(this,arguments)}}(),G=I,P=(s("1f90"),Object(h["a"])(G,i,n,!1,null,"b0c16082",null));P.options.__file="File.vue";t["default"]=P.exports},"4bd3":function(e,t,s){},"4cc3":function(e,t,s){"use strict";var i=s("9ddf"),n=s.n(i);n.a},"9ddf":function(e,t,s){},a046:function(e,t,s){"use strict";var i=s("0e7f"),n=s.n(i);n.a},a515:function(e,t,s){"use strict";var i=s("4bd3"),n=s.n(i);n.a},a6fa:function(e,t,s){},c6e4:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("groupTitle"),s("table",{staticClass:"table-permission",class:{"dis-in-b":e.isInline},style:e.tableStyle},[s("thead",[s("tr",[s("th",{staticClass:"percent27",style:e.td30Style},[e._v(" "+e._s(e.$t("STORAGE.ACL_GROUP"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.ACL_GROUP_INFO")))])])])],1),s("th",{staticClass:"percent23",style:e.td25Style},[e._v(e._s(e.$t("STORAGE.OBJECT_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.OBJECT_OBJECT_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:e.td25Style},[e._v(e._s(e.$t("STORAGE.ACL_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.OBJECT_ACL_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:e.td20Style})])]),s("tbody",e._l(e.aclData,function(t){return s("tr",{key:t.Grantee},[s("td",[e._v("\n          "+e._s(t.Grantee)+"\n        ")]),s("td",[s("Checkbox",{model:{value:t.Access.Read,callback:function(s){e.$set(t.Access,"Read",s)},expression:"item.Access.Read"}},[e._v(e._s(e.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{model:{value:t.Access.ReadAcp,callback:function(s){e.$set(t.Access,"ReadAcp",s)},expression:"item.Access.ReadAcp"}},[e._v(e._s(e.$t("STORAGE.READ")))]),s("Checkbox",{model:{value:t.Access.WriteAcp,callback:function(s){e.$set(t.Access,"WriteAcp",s)},expression:"item.Access.WriteAcp"}},[e._v(e._s(e.$t("STORAGE.WRITE")))])],1),s("td")])}))]),s("br"),e._t("userTitle"),s("table",{staticClass:"table-permission",class:{"dis-in-b":e.isInline},style:e.tableStyle},[s("thead",[s("tr",[s("th",{staticClass:"percent27",style:e.td30Style},[e._v(" "+e._s(e.$t("STORAGE.USER"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.ACL_USER_INFO")))])])])],1),s("th",{staticClass:"percent23",style:e.td25Style},[e._v(e._s(e.$t("STORAGE.OBJECT_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.OBJECT_OBJECT_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:e.td25Style},[e._v(e._s(e.$t("STORAGE.ACL_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e.$t("STORAGE.OBJECT_ACL_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:e.td20Style})])]),s("tbody",[e.isAddUser?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserItem.Grantee,expression:"newUserItem.Grantee"}],staticClass:"new-user-input",domProps:{value:e.newUserItem.Grantee},on:{input:function(t){t.target.composing||e.$set(e.newUserItem,"Grantee",t.target.value)}}})]),s("td",[s("Checkbox",{model:{value:e.newUserItem.Access.Read,callback:function(t){e.$set(e.newUserItem.Access,"Read",t)},expression:"newUserItem.Access.Read"}},[e._v(e._s(e.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{model:{value:e.newUserItem.Access.ReadAcp,callback:function(t){e.$set(e.newUserItem.Access,"ReadAcp",t)},expression:"newUserItem.Access.ReadAcp"}},[e._v(e._s(e.$t("STORAGE.READ")))]),s("Checkbox",{model:{value:e.newUserItem.Access.WriteAcp,callback:function(t){e.$set(e.newUserItem.Access,"WriteAcp",t)},expression:"newUserItem.Access.WriteAcp"}},[e._v(e._s(e.$t("STORAGE.WRITE")))])],1),s("td",[s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{disabled:e.newUserDisabled,size:"small",icon:"checkmark-round"},on:{click:e.addUserOK}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[e._v(e._s(e.$t("PUBLIC.ADD")))])])],1),s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{size:"small",icon:"close-round"},on:{click:function(t){e.isAddUser=!1}}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[e._v(e._s(e.$t("VIDEO.CANCEL")))])])],1)],1)]):e._e(),e._l(e.userAcl,function(t,i){return s("tr",{key:t.Grantee},[s("td",[e._v("\n          "+e._s(t.Grantee)+"\n        ")]),s("td",[s("Checkbox",{attrs:{disabled:e.username==t.Grantee},model:{value:t.Access.Read,callback:function(s){e.$set(t.Access,"Read",s)},expression:"item.Access.Read"}},[e._v(e._s(e.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{attrs:{disabled:e.username==t.Grantee},model:{value:t.Access.ReadAcp,callback:function(s){e.$set(t.Access,"ReadAcp",s)},expression:"item.Access.ReadAcp"}},[e._v(e._s(e.$t("STORAGE.READ")))]),s("Checkbox",{attrs:{disabled:e.username==t.Grantee},model:{value:t.Access.WriteAcp,callback:function(s){e.$set(t.Access,"WriteAcp",s)},expression:"item.Access.WriteAcp"}},[e._v(e._s(e.$t("STORAGE.WRITE")))])],1),s("td",[s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",0==i?{staticStyle:{margin:"0 6px"},attrs:{size:"small",icon:"plus-round"},on:{click:e.addUser}}:{staticStyle:{margin:"0 6px",visibility:"hidden"},attrs:{size:"small",icon:"plus-round"}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[e._v(e._s(e.$t("STORAGE.ADD_USER")))])])],1),s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{disabled:e.username==t.Grantee,size:"small",icon:"minus-round"},on:{click:function(t){e.deleteUser(i)}}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[e._v(e._s(e.$t("STORAGE.DELETE_USER")))])])],1)],1)])})],2)])],2)},n=[],r=(s("c5f6"),{props:{aclData:{type:Array,required:!0,default:function(){return c}},userAcl:{type:Array,required:!0,default:function(){return this.owerACL}},isInline:{type:Boolean,default:function(){return!1}},width:{type:Number}},data:function(){return{iconSize:16,isAddUser:!1,newUserItem:_.cloneDeep(a),userACLList:_.cloneDeep(this.userAcl)}},computed:{newUserDisabled:function(){var e=this.newUserItem.Grantee,t=this.newUserItem.Access,s=t.Read,i=t.ReadAcp,n=t.WriteAcp;return""===e||!(s||i||n)},username:function(){return this.$store.state.current.username},tableStyle:function(){return this.width?{width:"".concat(this.width,"px")}:{}},td30Style:function(){return this.width?{width:"".concat(this.width-parseInt(.2*this.width)-parseInt(.25*this.width*2),"px")}:{}},td20Style:function(){return this.width?{width:"".concat(parseInt(.2*this.width),"px")}:{}},td25Style:function(){return this.width?{width:"".concat(parseInt(.25*this.width),"px")}:{}}},methods:{addUser:function(){this.isAddUser=!0,this.newUserItem=_.cloneDeep(a)},addUserOK:function(){this.userAcl.push(this.newUserItem),this.isAddUser=!1},deleteUser:function(e){this.userAcl.splice(e,1)}}}),a={Grantee:"",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}},c=[{GranteeType:"Group",Grantee:"AllUsers",Access:{Read:!0,ReadAcp:!1,WriteAcp:!1}},{GranteeType:"Group",Grantee:"AuthenticatedUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}}],o=r,l=(s("4cc3"),s("2877")),u=Object(l["a"])(o,i,n,!1,null,null,null);u.options.__file="fileAcl.vue";t["a"]=u.exports},d9b5:function(e,t,s){"use strict";var i=s("a6fa"),n=s.n(i);n.a},e9b8:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bsc-legend"},e._l(e.data,function(t){return s("div",{key:t.text,staticClass:"legend-item"},[s("Icon",{attrs:{type:t.icon,size:"14"}}),s("span",{staticClass:"legend-text"},[e._v(e._s(e.$t(t.text)))]),t!==e.data[e.data.length-1]?s("span",{staticClass:"legend-separator"},[e._v("|")]):e._e()],1)}))},n=[],r={props:["data"]},a=r,c=(s("a046"),s("2877")),o=Object(c["a"])(a,i,n,!1,null,"ea96999c",null);o.options.__file="legend.vue";t["a"]=o.exports}}]);