(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87c371de"],{"04a5":function(t,e,s){"use strict";var a=s("a8ed"),r=s.n(a);r.a},"06b2":function(t,e,s){"use strict";s.d(e,"b",function(){return l}),s.d(e,"g",function(){return u}),s.d(e,"e",function(){return p}),s.d(e,"f",function(){return h}),s.d(e,"d",function(){return m}),s.d(e,"a",function(){return v}),s.d(e,"c",function(){return I});s("5a09"),s("84fb"),s("bc72"),s("25d7");var a=s("98e2"),r=(s("9382"),s("b267")),i=s("ff66"),n=s("dd1f"),o=s("d570"),c=s.n(o),l=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["c"])({timeout:1e4,host:n["a"].policyHOST});case 2:return s=t.sent,t.abrupt("return",new Promise(function(t,a){return s.getBucketPolicy({Bucket:e},function(s,r){return s&&"PolicyNotFound"!==s.code?a(s):t({bucket:e,data:r})})}));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,s){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a={name:"post_upload_transcoding",value:s},t.prev=1,t.abrupt("return",Object(i["d"])("putBucketPolicy",{Bucket:e,Policy:JSON.stringify(a)},n["a"].policyHOST));case 5:return t.prev=5,t.t0=t["catch"](1),t.abrupt("return",Promise.reject(t.t0));case 8:case"end":return t.stop()}},t,this,[[1,5]])}));return function(e,s){return t.apply(this,arguments)}}(),p=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(e);case 3:return s=t.sent,a=s.data&&s.data.Policy?JSON.parse(s.data.Policy):{},r=[],a&&a.post_upload_transcoding&&a.post_upload_transcoding.length>0&&(r=a.post_upload_transcoding),t.abrupt("return",r);case 10:t.prev=10,t.t0=t["catch"](0),c.a.Message.error(t.t0.message,5);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),d=[],h=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return d=[],t.next=3,_();case 3:return t.abrupt("return",d);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=7;break}return t.next=4,Object(i["e"])("listPipelines");case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,Object(i["e"])("listPipelines",{PageToken:e});case 9:t.t0=t.sent;case 10:if(r=t.t0,(s=d).push.apply(s,Object(a["a"])(r.Pipelines)),!r.NextPageToken){t.next=15;break}return t.next=15,_(r.NextPageToken);case 15:t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](0),c.a.Message.error(t.t1.message,5);case 20:case"end":return t.stop()}},t,this,[[0,17]])}));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return f=[],t.next=3,E();case 3:return e=[],s=[],a=[],f.length>0&&f.forEach(function(t){e[t.Id]=t.Container}),f.length>0&&f.forEach(function(t){s[t.Id]=t.Name,a[t.Id]=t.Video.Codec}),t.abrupt("return",{templateList:f,templateContainer:e,templateVideoCodec:a,templateName:s});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),f=[],E=function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,Object(i["e"])("listPresets");case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,Object(i["e"])("listPresets",{PageToken:e});case 8:t.t0=t.sent;case 9:if(r=t.t0,Array.isArray(r.Presets)&&(s=f).push.apply(s,Object(a["a"])(r.Presets)),!r.NextPageToken){t.next=14;break}return t.next=14,E(r.NextPageToken);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),v=function(t){var e=Math.floor(t/1e3);return["".concat(Math.floor(e/3600),":").concat(Math.floor(e/60)%60,":").concat(e%60),"".concat(t%1e3)]},I=function(t,e){var s=t.split(":").map(function(t){return Number(t)});return(1e3*(3600*s[0]+60*s[1]+s[2])+Number(e)).toString()}},3542:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"4cc3":function(t,e,s){"use strict";var a=s("b966"),r=s.n(a);r.a},5580:function(t,e,s){var a=s("8718"),r=s("7f68")(!1);a(a.S,"Object",{values:function(t){return r(t)}})},5616:function(t,e,s){var a=s("53da"),r=s("69d8"),i=s("9a0d").f,n=s("e853").f,o=s("c28a"),c=s("2fc4"),l=a.RegExp,u=l,p=l.prototype,d=/a/g,h=/a/g,_=new l(d)!==d;if(s("f711")&&(!_||s("cce3")(function(){return h[s("5761")("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")}))){l=function(t,e){var s=this instanceof l,a=o(t),i=void 0===e;return!s&&a&&t.constructor===l&&i?t:r(_?new u(a&&!i?t.source:t,e):u((a=t instanceof l)?t.source:t,a&&i?c.call(t):e),s?this:p,l)};for(var m=function(t){t in l||i(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},f=n(u),E=0;f.length>E;)m(f[E++]);p.constructor=l,l.prototype=p,s("7e22")(a,"RegExp",l)}s("2943")("RegExp")},"7b7c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bsc-output-edit bsc-edit"},[s("div",{staticClass:"layout-bsc-toolbar"},[s("Breadcrumb",[s("Breadcrumb-item",{attrs:{href:"/video/Output"}},[t._v(t._s(t.$t("VIDEO.AUTOMATIC_TRANSCODING_CONFIGURATION")))]),s("Breadcrumb-item",[t._v(t._s(t.$t("VIDEO.NEW_CONFIGURATION")))])],1)],1),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("div",{staticClass:"section-separator"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[t._v(t._s(t.$t("VIDEO.INPUT_CONFIGURATION")))])])]),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.TRANSCODING_PATH_RULES"))+" : ")]),s("Radio-group",{model:{value:t.auxiliary.reg,callback:function(e){t.$set(t.auxiliary,"reg",e)},expression:"auxiliary.reg"}},[s("Radio",{key:"extension",staticStyle:{"line-height":"30px"},attrs:{label:"extension"}},[t._v(t._s(t.$t("VIDEO.BY_FILE_EXTENSION_CONFIGURATION")))]),s("Radio",{key:"regular",attrs:{label:"regular"}},[t._v(t._s(t.$t("VIDEO.REGULAR_EXPRESSION_CONFIGURATION")))])],1)],1),s("div",{staticClass:"form-item"},["extension"===t.auxiliary.reg?s("span",{staticClass:"form-label"}):t._e(),"extension"===t.auxiliary.reg?s("Input",{staticClass:"sub-setting-input",attrs:{placeholder:t.$t("VIDEO.PATH")},model:{value:t.auxiliary.path,callback:function(e){t.$set(t.auxiliary,"path",e)},expression:"auxiliary.path"}}):t._e(),"extension"===t.auxiliary.reg?s("Input",{staticClass:"sub-setting-input",attrs:{placeholder:t.$t("VIDEO.EXTENSION_NAME")},model:{value:t.auxiliary.extension,callback:function(e){t.$set(t.auxiliary,"extension",e)},expression:"auxiliary.extension"}}):t._e(),"extension"===t.auxiliary.reg?s("span",[t._v(t._s(t.$t("VIDEO.SEPARATE_EXTENSION_NAMES")))]):t._e(),s("Form",{ref:"auxiliaryForm",attrs:{model:t.auxiliary,rules:t.ruleValidate,"label-width":205}},["regular"===t.auxiliary.reg?s("FormItem",{attrs:{prop:"regular"}},[s("Input",{staticClass:"sub-setting-input",attrs:{placeholder:t.$t("VIDEO.REGULAR_EXPRESSION")},model:{value:t.auxiliary.regular,callback:function(e){t.$set(t.auxiliary,"regular",e)},expression:"auxiliary.regular"}})],1):t._e()],1)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.INPUT_BUCKET"))+" : ")]),s("Select",{staticClass:"line-width",attrs:{prepend:!0},model:{value:t.inputBucket,callback:function(e){t.inputBucket=e},expression:"inputBucket"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-folder"},slot:"prepend"}),t._l(t.bucketList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1)]),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("div",{staticClass:"section-separator"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[t._v(t._s(t.$t("VIDEO.OUTPUT_CONFIGURATION")))])])]),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.OUTPUT_KEY_PREFIX"))+" : ")]),s("Input",{staticClass:"line-width",attrs:{placeholder:t.$t("VIDEO.OUTPUT_KEY_PREFIX")},model:{value:t.transcode.output_key_prefix,callback:function(e){t.$set(t.transcode,"output_key_prefix",e)},expression:"transcode.output_key_prefix"}})],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.OUTPUT_BUCKET"))+" : ")]),s("Select",{staticClass:"line-width",attrs:{prepend:!0},model:{value:t.transcode.output_bucket,callback:function(e){t.$set(t.transcode,"output_bucket",e)},expression:"transcode.output_bucket"}},[t._l(t.bucketList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),s("Icon",{attrs:{slot:"prepend",type:"ios-folder"},slot:"prepend"})],2)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.OUTPUT_RULES"))+" : ")]),s("div",{staticClass:"table-box line-width"},[s("Table",{attrs:{border:"",size:"small",context:t.self,stripe:!0,columns:t.outputsHeader,data:t.transcode.outputs,"no-data-text":t.$t("VIDEO.AT_LEAST_ONE_RULE")}})],1),s("br"),t.HLSError?s("p",{staticClass:"style-name-info redFont"},[t._v(t._s(t.$t("VIDEO.AUTO_OUTPUT_RULES_DESCRIPTION")))]):t._e(),s("Button",{staticClass:"button-add-item",attrs:{icon:"plus",size:"small"},on:{click:t.addOutput}},[t._v(t._s(t.$t("PUBLIC.ADD")))])],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.VIDEO_SCREENSHOTS_RULES"))+" : ")]),s("div",{staticClass:"table-box line-width"},[s("Table",{attrs:{border:"",size:"small",context:t.self,stripe:!0,columns:t.shotsHeader,data:t.transcode.snapshots,"no-data-text":t.$t("VIDEO.AT_LEAST_ONE_RULE")}})],1),s("br"),t.osError?s("p",{staticClass:"style-name-info redFont"},[t._v(t._s(t.$t("VIDEO.AT_LEAST_ONE_RULE")))]):t._e(),s("Button",{staticClass:"button-add-item",attrs:{icon:"plus",size:"small"},on:{click:t.addShot}},[t._v(t._s(t.$t("PUBLIC.ADD")))])],1)]),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("div",{staticClass:"section-separator"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[t._v(t._s(t.$t("VIDEO.MORE_CONFIGURATION")))])])]),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.WHETHER_DELETE_ORIGINAL_FILE_AFTER_TRANSCODING"))+" : ")]),s("Radio-group",{model:{value:t.transcode.delete_origin,callback:function(e){t.$set(t.transcode,"delete_origin",e)},expression:"transcode.delete_origin"}},[s("Radio",{key:"true",staticStyle:{"line-height":"30px"},attrs:{label:"true"}},[t._v(t._s(t.$t("VIDEO.YES")))]),s("Radio",{key:"false",attrs:{label:"false"}},[t._v(t._s(t.$t("VIDEO.NO")))])],1)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.WHETHER_RETAIN_ORIGINAL_PATH_AFTER_TRANSCODING"))+" : ")]),s("Radio-group",{model:{value:t.transcode.keep_input_path,callback:function(e){t.$set(t.transcode,"keep_input_path",e)},expression:"transcode.keep_input_path"}},[s("Radio",{key:"true",staticStyle:{"line-height":"30px"},attrs:{label:"true"}},[t._v(t._s(t.$t("VIDEO.YES")))]),s("Radio",{key:"false",attrs:{label:"false"}},[t._v(t._s(t.$t("VIDEO.NO")))])],1)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.TRANSCODING_SUCCESSFUL_CALLBACK_URL"))+" : ")]),s("Input",{staticClass:"line-width",staticStyle:{display:"inline-table"},attrs:{placeholder:t.$t("VIDEO.TRANSCODING_SUCCESSFUL_CALLBACK_URL")},model:{value:t.transcode.success_callback_url,callback:function(e){t.$set(t.transcode,"success_callback_url",e)},expression:"transcode.success_callback_url"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("http://")])])],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.TRANSCODING_FAILED_CALLBACK_URL"))+" : ")]),s("Input",{staticClass:"line-width",staticStyle:{display:"inline-table"},attrs:{placeholder:t.$t("VIDEO.TRANSCODING_FAILED_CALLBACK_URL")},model:{value:t.transcode.failure_callback_url,callback:function(e){t.$set(t.transcode,"failure_callback_url",e)},expression:"transcode.failure_callback_url"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("http://")])])],1)]),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("div",{staticClass:"section-separator"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[t._v(t._s(t.$t("VIDEO.MASTER_PLAYLIST_CONFIGURATION")))])])]),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.WHETHER_TO_OPEN"))+" : ")]),s("i-switch",{staticStyle:{"margin-top":"3px"},model:{value:t.auxiliary.MP,callback:function(e){t.$set(t.auxiliary,"MP",e)},expression:"auxiliary.MP"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("VIDEO.ON")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("VIDEO.OFF")))])])],1),t.auxiliary.MP?s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.SLICE_FORMAT"))+" : ")]),s("Radio-group",{model:{value:t.transcode.master_playlist.format,callback:function(e){t.$set(t.transcode.master_playlist,"format",e)},expression:"transcode.master_playlist.format"}},[s("Radio",{key:"HLSv3",staticStyle:{"line-height":"30px"},attrs:{label:"HLSv3"}},[t._v("HLSv3")])],1)],1):t._e(),t.auxiliary.MP?s("div",{staticClass:"form-item"},[s("Form",{ref:"nameForm",attrs:{model:t.transcode.master_playlist,rules:t.ruleValidate,"label-width":205}},[s("FormItem",{attrs:{label:t.$t("VIDEO.MASTER_PLAYLIST_FILE_NAME_SUFFIX"),prop:"name"}},[s("Input",{staticClass:"line-width",attrs:{placeholder:"MasterPlaylist"},model:{value:t.transcode.master_playlist.name,callback:function(e){t.$set(t.transcode.master_playlist,"name",e)},expression:"transcode.master_playlist.name"}})],1)],1)],1):t._e()]),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("div",{staticClass:"section-separator"},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info"},[t._v(t._s(t.$t("VIDEO.PERMISSION_SETTINGS")))])])]),s("div",{staticClass:"form-item"},[s("file-acl",{attrs:{aclData:t.groupACLList,userAcl:t.userACLList,isInline:!0,width:600}},[s("span",{staticClass:"form-label",attrs:{slot:"groupTitle"},slot:"groupTitle"},[t._v(t._s(t.$t("VIDEO.USER_GROUP_PERMISSIONS"))+" : ")]),s("span",{staticClass:"form-label",attrs:{slot:"userTitle"},slot:"userTitle"},[t._v(t._s(t.$t("VIDEO.USER_PERMISSIONS"))+" : ")])])],1)]),s("div",{staticClass:"separator-line"}),s("div",{staticClass:"editBlock"},[s("Button",{staticClass:"button-save",attrs:{type:"primary"},on:{click:t.beforeSubmit}},[t._v(t._s(t.$t("VIDEO.SAVE")))])],1),s("Modal",{staticClass:"edit-modal",attrs:{title:t.$t("VIDEO.OUTPUT_RULES"),width:"700"},model:{value:t.showOutputsModal,callback:function(e){t.showOutputsModal=e},expression:"showOutputsModal"}},[s("Form",{ref:"outputForm",attrs:{model:t.outputModal,"label-width":155,rules:t.ruleValidate}},[s("FormItem",{attrs:{label:t.$t("VIDEO.TRANSCODING_TEMPLATE"),prop:"preset_id"}},[s("Select",{staticClass:"line-width",on:{"on-change":t.templateChange},model:{value:t.outputModal.preset_id,callback:function(e){t.$set(t.outputModal,"preset_id",e)},expression:"outputModal.preset_id"}},t._l(t.templateList,function(e){return s("Option",{key:e.Id,attrs:{value:e.Id}},[t._v(t._s(e.Name))])}))],1),s("FormItem",{attrs:{label:t.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX"),prop:"key_suffix"}},[s("Input",{staticClass:"line-width",attrs:{placeholder:t.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX")},model:{value:t.outputModal.key_suffix,callback:function(e){t.$set(t.outputModal,"key_suffix",e)},expression:"outputModal.key_suffix"}})],1),t.HLSShow?s("FormItem",{attrs:{label:t.$t("VIDEO.HLS_SLICE_LENGTH"),prop:"segment_duration"}},[s("Slider",{staticClass:"my-slider",attrs:{min:0,max:50,"show-input":""},model:{value:t.outputModal.segment_duration,callback:function(e){t.$set(t.outputModal,"segment_duration",e)},expression:"outputModal.segment_duration"}})],1):t._e(),t.isAutoCodec?s("p",{staticClass:"page-info",staticStyle:{"padding-left":"155px"}},[t._v("转码模版的视频编码方式为“不变”时不能添加水印")]):t._e(),s("FormItem",{attrs:{label:"水印"}},[s("i-switch",{staticStyle:{"margin-top":"3px"},attrs:{disabled:t.isAutoCodec},model:{value:t.auxiliary.isWaterMarkerOpen,callback:function(e){t.$set(t.auxiliary,"isWaterMarkerOpen",e)},expression:"auxiliary.isWaterMarkerOpen"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v(t._s(t.$t("VIDEO.ON")))]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v(t._s(t.$t("VIDEO.OFF")))])])],1),t.auxiliary.isWaterMarkerOpen?s("FormItem",{attrs:{label:"文件Key",prop:"InputKey"}},[s("Input",{staticClass:"line-width",attrs:{placeholder:"水印图片要和视频源文件在一个bucket里，输入文件key即可，例如abc.png",disabled:t.isAutoCodec},model:{value:t.outputModal.InputKey,callback:function(e){t.$set(t.outputModal,"InputKey",e)},expression:"outputModal.InputKey"}})],1):t._e()],1),s("div",{staticClass:"copy-modal-footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:t.beforeUpdateOutputs}},[t._v(t._s(t.$t("VIDEO.OK")))])],1)],1),s("Modal",{staticClass:"edit-modal",attrs:{title:t.$t("VIDEO.SNAPSHOTS_RULES"),width:"700"},model:{value:t.showShotsModal,callback:function(e){t.showShotsModal=e},expression:"showShotsModal"}},[s("Form",{ref:"shotsForm",attrs:{model:t.shotModal,"label-width":0,rules:t.ruleValidate,inline:""}},[s("div",{staticClass:"form-item mar-b-0"},[s("span",{staticClass:"form-label required-item"},[t._v(t._s(t.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX"))+" : ")]),s("FormItem",{attrs:{prop:"key_suffix",required:""}},[s("Input",{staticStyle:{width:"160px"},attrs:{placeholder:t.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX")},model:{value:t.shotModal.key_suffix,callback:function(e){t.$set(t.shotModal,"key_suffix",e)},expression:"shotModal.key_suffix"}})],1),s("Select",{staticStyle:{width:"100px",display:"inline-block"},model:{value:t.shotModal.format,callback:function(e){t.$set(t.shotModal,"format",e)},expression:"shotModal.format"}},t._l(t.formatList,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),s("div",{staticClass:"form-item mar-b-0"},[s("span",{staticClass:"form-label required-item"},[t._v(t._s(t.$t("VIDEO.SCREENSHOT_START_TIME"))+" : ")]),s("FormItem",{attrs:{prop:"time"}},[s("InputNumber",{model:{value:t.shotModal.time,callback:function(e){t.$set(t.shotModal,"time",e)},expression:"shotModal.time"}}),t._v(" S\n        ")],1)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.SCREENSHOT_INTERVAL"))+" : ")]),s("InputNumber",{attrs:{min:1},model:{value:t.shotModal.interval,callback:function(e){t.$set(t.shotModal,"interval",e)},expression:"shotModal.interval"}}),t._v(" S\n      ")],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.SCREENSHOT_MAX_NUMBER"))+" : ")]),s("InputNumber",{attrs:{min:1},model:{value:t.shotModal.number,callback:function(e){t.$set(t.shotModal,"number",e)},expression:"shotModal.number"}})],1),s("div",{staticClass:"form-item mar-b-0"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.RESOLUTION"))+" : ")]),s("Radio-group",{model:{value:t.shotModal.resolution,callback:function(e){t.$set(t.shotModal,"resolution",e)},expression:"shotModal.resolution"}},[s("Radio",{attrs:{label:"auto"}},[t._v(t._s(t.$t("VIDEO.WH_UNALTERED")))]),s("Radio",{attrs:{label:"value"}})],1),s("FormItem",{attrs:{prop:"width"}},[s("InputNumber",{attrs:{disabled:"auto"===t.shotModal.resolution,placeholder:t.$t("VIDEO.WIDTH")},model:{value:t.shotModal.width,callback:function(e){t.$set(t.shotModal,"width",e)},expression:"shotModal.width"}})],1),s("FormItem",{attrs:{prop:"height"}},[s("InputNumber",{attrs:{disabled:"auto"===t.shotModal.resolution,placeholder:t.$t("VIDEO.HEIGHT")},model:{value:t.shotModal.height,callback:function(e){t.$set(t.shotModal,"height",e)},expression:"shotModal.height"}})],1)],1),s("div",{staticClass:"form-item"},[s("span",{staticClass:"form-label"},[t._v(t._s(t.$t("VIDEO.ASPECT_RATIO"))+" : ")]),s("Radio-group",{model:{value:t.shotModal.aspect_ratio,callback:function(e){t.$set(t.shotModal,"aspect_ratio",e)},expression:"shotModal.aspect_ratio"}},t._l(t.aspectRatioList,function(e){return s("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1)]),s("div",{staticClass:"copy-modal-footer",attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:t.beforeUpdateShots}},[t._v(t._s(t.$t("VIDEO.OK")))])],1)],1)],1)},r=[],i=(s("5580"),s("63af"),s("dccb"),s("5616"),s("84fb"),s("d654"),s("dc2a"),s("98e2")),n=s("f25b"),o=(s("5a09"),s("25d7"),s("bc72"),s("20a2"),s("9382"),s("b267")),c=s("06b2"),l=s("c6e4"),u={components:{fileAcl:l["a"]},data:function(){var t=this;return{iconSize:18,self:this,transcode:_.cloneDeep(v),inputBucket:"",bucketList:this.bucketList,showOutputsModal:!1,showShotsModal:!1,aspectRatioList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto"},{name:"1:1",value:"1:1"},{name:"4:3",value:"4:3"},{name:"3:2",value:"3:2"},{name:"16:9",value:"16:9"}],formatList:["png","jpg"],templateList:this.templateList,outputModal:_.clone(f),shotModal:_.clone(E),auxiliary:_.cloneDeep(m),HLSShow:!1,groupACLList:[],userACLList:[],templateContainer:{},templateName:{},templateVideoCodec:{},HLSError:!1,isAutoCodec:!1,ruleValidate:{regular:[{validator:this.validateRegular,trigger:"change"}],name:[{validator:this.validateName,trigger:"change"}],preset_id:[{required:!0,message:this.$t("VIDEO.PERSET_REQUIRED"),trigger:"change"}],key_suffix:[{required:!0,message:this.$t("VIDEO.KEY_SUFFIX_REQUIRED"),trigger:"change"}],segment_duration:[{validator:this.validateSegment,trigger:"blur"}],InputKey:[{validator:this.validateInputKey,trigger:"change"}],time:[{type:"number",min:1,message:this.$t("PUBLIC.NOT_LESS",{num:"1"}),trigger:"change"}],width:[{validator:this.validateWidth,trigger:"change"}],height:[{validator:this.validateWidth,trigger:"change"}]},outputsHeader:[{title:this.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX"),key:"key_suffix",width:140},{title:this.$t("VIDEO.TRANSCODING_TEMPLATE"),key:"template",width:100},{title:this.$t("VIDEO.HLS_SLICE_LENGTH"),width:120,key:"segment_duration"},{title:"水印文件Key",width:120,key:"watermarkers",render:function(t,e){return t("div",[e.row.watermarks?e.row.watermarks[0].InputKey:"水印未启用"])}},{title:"Actions",key:"actions",width:120,render:function(e,s){return e("div",[e("Tooltip",{props:{content:t.$t("PUBLIC.EDIT"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[e("i-button",{props:{size:"small"},on:{click:function(){t.editOutput(s.row._index)}}},[e("Icon",{props:{type:"compose",size:t.iconSize}})])]),e("Tooltip",{props:{content:t.$t("PUBLIC.DELETE"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[e("i-button",{props:{size:"small"},on:{click:function(){t.deleteOutput(s.row._index)}}},[e("Icon",{props:{type:"ios-trash",size:t.iconSize}})])])])}}],shotsHeader:[{title:this.$t("VIDEO.OUTPUT_FILE_NAME_SUFFIX"),key:"key_suffix",width:140},{title:this.$t("VIDEO.FORMAT"),key:"format",width:70},{title:this.$t("VIDEO.SCREENSHOT_START_TIME_SECOND"),width:160,key:"time"},{title:this.$t("VIDEO.SCREENSHOT_INTERVAL_SECOND"),width:140,key:"interval"},{title:this.$t("VIDEO.SCREENSHOT_MAX_NUMBER"),width:120,key:"number"},{title:this.$t("VIDEO.SCREENSHOT_RESOLUTION"),width:100,key:"resolution"},{title:this.$t("VIDEO.ASPECT_RATIO"),width:80,key:"aspect_ratio"},{title:"Actions",key:"actions",width:100,render:function(e,s){return e("div",[e("Tooltip",{props:{content:t.$t("PUBLIC.EDIT"),delay:1e3,placement:"top"},class:{"mar-r-5":!0}},[e("i-button",{props:{size:"small"},on:{click:function(){t.editShot(s.row._index)}}},[e("Icon",{props:{type:"compose",size:t.iconSize}})])]),e("Tooltip",{props:{content:t.$t("PUBLIC.DELETE"),delay:1e3,placement:"top"}},[e("i-button",{props:{size:"small"},on:{click:function(){t.deleteShot(s.row._index)}}},[e("Icon",{props:{type:"ios-trash",size:t.iconSize}})])])])}}]}},computed:{bucket:function(){return this.$route.params.bucket},id:function(){return this.$route.params.id},username:function(){return this.$store.state.current.username},owerACL:function(){return{GranteeType:"Canonial",Grantee:this.username,Access:{Read:!0,ReadAcp:!0,WriteAcp:!0}}},osError:function(){return 0===this.transcode.snapshots.length&&0===this.transcode.outputs.length}},created:function(){this.getTranscode()},methods:{getBucketNames:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getBuckets");case 2:e=t.sent,this.bucketList=_.map(e.Buckets,function(t){return t.Name});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getTranscode:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s,a,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:if(e=t.sent,this.templateList=e.templateList,this.templateContainer=e.templateContainer,this.templateName=e.templateName,this.templateVideoCodec=e.templateVideoCodec,"none"!==this.id){t.next=16;break}return this.userACLList=[this.owerACL],this.groupACLList=_.cloneDeep(h),t.next=12,this.getBucketNames();case 12:this.inputBucket=this.bucketList[0],this.transcode.output_bucket=this.bucketList[0],t.next=24;break;case 16:return this.inputBucket=this.bucket,t.next=19,Object(c["e"])(this.bucket);case 19:return s=t.sent,a=s.filter(function(t){return t.id===r.id}),this.convert2Front(a[0]),t.next=24,this.getBucketNames();case 24:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addOutput:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.outputModal=_.clone(f),this.outputIndex=this.transcode.outputs.length,this.showOutputsModal=!0,this.auxiliary.isWaterMarkerOpen=!1,this.HLSError=!1;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),editOutput:function(t){this.outputIndex=t,this.outputModal=_.clone(this.transcode.outputs[t]),this.outputModal.segment_duration=parseInt(this.outputModal.segment_duration),this.outputModal.InputKey=this.outputModal.watermarks?this.outputModal.watermarks[0].InputKey:"",this.auxiliary.isWaterMarkerOpen=!!this.outputModal.watermarks,this.isTS(this.outputModal.preset_id)?this.HLSShow=!0:this.HLSShow=!1,this.showOutputsModal=!0,this.isAutoCodec=this.isAC(this.outputModal.preset_id),this.HLSError=!1},beforeUpdateOutputs:function(){var t=this;this.$refs["outputForm"].validate(function(e){e?t.updateOutputs():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))})},updateOutputs:function(){var t=this.transcode.outputs.length;this.outputModal.template="".concat(this.outputModal.preset_id,"+").concat(this.templateName[this.outputModal.preset_id]);var e=this.auxiliary.isWaterMarkerOpen?Object.assign(this.outputModal,{watermarks:[{InputKey:this.outputModal.InputKey}]}):this.outputModal;delete e.InputKey,this.isAutoCodec&&delete e.watermarks,this.outputIndex===t?this.transcode.outputs.push(e):this.transcode.outputs.splice(this.outputIndex,1,e),this.showOutputsModal=!1},deleteOutput:function(t){this.transcode.outputs.splice(t,1)},addShot:function(){this.shotModal=_.clone(E),this.shotIndex=this.transcode.snapshots.length,this.showShotsModal=!0},beforeUpdateShots:function(){var t=this;this.$refs["shotsForm"].validate(function(e){e?t.updateShots():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))})},updateShots:function(){var t=this.transcode.snapshots.length,e=_.clone(this.shotModal);"auto"!==e.resolution&&(e.resolution="".concat(e.width,"*").concat(e.height)),delete e.width,delete e.height,this.shotIndex===t?this.transcode.snapshots.push(e):this.transcode.snapshots.splice(this.shotIndex,1,e),this.showShotsModal=!1},editShot:function(t){this.shotIndex=t,this.shotModal=_.clone(this.transcode.snapshots[t]),"auto"!==this.shotModal.resolution&&(this.shotModal.width=this.shotModal.resolution.split("*")[0],this.shotModal.height=this.shotModal.resolution.split("*")[1],this.shotModal.resolution="value"),this.showShotsModal=!0},deleteShot:function(t){this.transcode.snapshots.splice(t,1)},beforeSubmit:function(){var t=this;"regular"===this.auxiliary.reg?this.$refs["auxiliaryForm"].validate(function(e){e?t.auxiliary.MP?t.$refs["nameForm"].validate(function(e){e?t.otherRule()&&t.addTranscode():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))}):t.otherRule()&&t.addTranscode():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))}):this.auxiliary.MP?this.$refs["nameForm"].validate(function(e){e?t.otherRule()&&t.addTranscode():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))}):this.otherRule()&&this.addTranscode()},otherRule:function(){var t=this,e=[];if(this.osError)return this.$Message.error(this.$t("PUBLIC.FORM_VALID_FAILED")),!1;if(this.auxiliary.MP){if(this.transcode.outputs.forEach(function(s){t.isTS(s.preset_id)&&e.push(s.segment_duration||0)}),0===e.length)return this.$Message.error(this.$t("PUBLIC.FORM_VALID_FAILED")),this.HLSError=!0,!1;var s=e.filter(function(t){return parseInt(t)===parseInt(e[0])});if(s.length!==e.length)return this.$Message.error(this.$t("PUBLIC.FORM_VALID_FAILED")),this.HLSError=!0,!1;if(0===e[0])return this.$Message.error(this.$t("PUBLIC.FORM_VALID_FAILED")),this.HLSError=!0,!1}return!0},addTranscode:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:"none"===this.id?this.newTranscode():this.bucket===this.inputBucket?this.alterTranscode():this.transcodeChangeBucket();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),newTranscode:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$Loading.start(),t.next=3,Object(c["e"])(this.inputBucket);case 3:return e=t.sent,s=this.convert2Save(this.transcode),s.id=Date.now()+Math.random().toString().slice(-6),e.push(s),t.next=9,Object(c["g"])(this.inputBucket,e);case 9:this.$router.push({name:"output"}),this.$Message.success(this.$t("VIDEO.SET_UP_SUCCESSFULLY"));case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),alterTranscode:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s,a,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$Loading.start(),t.next=4,Object(c["e"])(this.inputBucket);case 4:return e=t.sent,s=this.convert2Save(this.transcode),e.forEach(function(t,e){t.id===r.id&&(a=e)}),e.splice(a,1,s),t.next=10,Object(c["g"])(this.inputBucket,e);case 10:this.$router.push({name:"output"}),this.$Message.success(this.$t("VIDEO.SET_UP_SUCCESSFULLY")),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),this.$Message.error(this.$t("VIDEO.SET_UP_FAILED"));case 17:case"end":return t.stop()}},t,this,[[0,14]])}));return function(){return t.apply(this,arguments)}}(),transcodeChangeBucket:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,s,a,r,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$Loading.start(),t.next=4,Promise.all([Object(c["e"])(this.bucket),Object(c["e"])(this.inputBucket)]);case 4:return e=t.sent,s=Object(n["a"])(e,2),a=s[0],r=s[1],i=this.convert2Save(this.transcode),i.id=Date.now()+Math.random().toString().slice(-6),a.forEach(function(t,e){t.id===o.id&&a.splice(e,1)}),r.push(i),t.next=14,Promise.all([Object(c["g"])(this.bucket,a),Object(c["g"])(this.inputBucket,r)]);case 14:this.$router.push({name:"output"}),this.$Message.success(this.$t("VIDEO.SET_UP_SUCCESSFULLY")),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),this.$Message.error(this.$t("VIDEO.SET_UP_FAILED"));case 21:case"end":return t.stop()}},t,this,[[0,18]])}));return function(){return t.apply(this,arguments)}}(),convert2Save:function(t){var e=_.clone(t),s=_.clone(this.auxiliary),a=_.clone(t);0===t.outputs.length?delete a.outputs:a.outputs=e.outputs.map(function(t){var e=_.clone(t);return t.segment_duration&&0!==t.segment_duration?e.segment_duration=t.segment_duration.toString():delete e.segment_duration,delete e.template,e}),0===t.snapshots.length?delete a.snapshots:a.snapshots=e.snapshots.map(function(t){var e=_.clone(t);return e.interval=t.interval.toString(),e.number=t.number.toString(),e.time=t.time.toString(),e});var r=this.groupACLList,n=this.userACLList;return a.output_acls=_.without(Object(i["a"])(r).concat(Object(i["a"])(n)).map(function(t){var e=t.Access,s=e.Read,a=e.ReadAcp,r=e.WriteAcp;if(s||a||r)return I(t)}),null,void 0),this.auxiliary.MP||delete a.master_playlist,a.allowed_keys_regex="extension"===s.reg?["^".concat(s.path,".*\\.(").concat(s.extension,")$")]:["".concat(s.regular)],a},templateChange:function(t){this.HLSShow=this.isTS(t),this.HLSShow||(this.outputModal.segment_duration=0),this.isAutoCodec=this.isAC(t)},isAC:function(t){return!!t&&"auto"===this.templateVideoCodec[t]},isTS:function(t){return"ts"===this.templateContainer[t]},convert2Front:function(t){var e=this,s=_.cloneDeep(t);t.outputs&&0!==Object.keys(t.outputs)?s.outputs.forEach(function(t){t.template="".concat(t.preset_id,"+").concat(e.templateName[t.preset_id])}):s.outputs=[],t.snapshots&&0!==Object.keys(t.snapshots)||(s.snapshots=[]),this.auxiliary.MP=!!s.master_playlist,s.master_playlist||(s.master_playlist={format:"HLSv3",name:""}),this.transcode=s,this.auxiliary.regular=t.allowed_keys_regex[0],t.output_acls.forEach(function(t){var s={Read:!1,ReadAcp:!1,WriteAcp:!1};t.Access.forEach(function(t){"FullControl"===t?s={Read:!0,ReadAcp:!0,WriteAcp:!0}:s[t]=!0}),t.Access=s,"Group"===t.GranteeType?"AllUsers"===t.Grantee?e.groupACLList[0]=t:e.groupACLList[1]=t:e.userACLList.push(t),0===e.groupACLList.length&&(e.groupACLList=_.cloneDeep(h))})},validateRegular:function(t,e,s){p(e)?s(new Error(this.$t("VIDEO.EXPRESSION_INCORRECT"))):s()},validateName:function(t,e,s){!e&&this.auxiliary.MP?s(new Error(this.$t("VIDEO.FILE_NAME_SUFFIX_CANNOT_EMPTY"))):s()},validateSegment:function(t,e,s){this.isTS(this.outputModal.preset_id)&&this.auxiliary.MP&&0===e?s(new Error(this.$t("VIDEO.HLS_SLICE_LENGTH_CANNOT_BE_0"))):s()},validateWidth:function(t,e,s){"auto"!==this.shotModal.resolution?Number.isInteger(e)?e<1?s(new Error(this.$t("PUBLIC.NOT_LESS",{num:"1"}))):s():s(new Error(this.$t("PUBLIC.NUM_PLEASE"))):s()},validateInputKey:function(t,e,s){this.isAutoCodec||!this.auxiliary.isWaterMarkerOpen||e?s():s(new Error("请填写水印文件key"))}}},p=function(t){try{new RegExp(t)}catch(t){return!0}return!1},d=["AllUsers","AuthenticatedUsers"],h=[{GranteeType:"Group",Grantee:"AllUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}},{GranteeType:"Group",Grantee:"AuthenticatedUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}}],m={reg:"regular",path:"",extension:"",regular:"",MP:!1,isWaterMarkerOpen:!1},f={key_suffix:"",preset_id:"",segment_duration:0},E={key_suffix:"",format:"jpg",time:"0",interval:"1",number:"1",resolution:"auto",aspect_ratio:"auto",width:"",height:""},v={is_enabled:"true",allowed_keys_regex:[],keep_input_path:"false",delete_origin:"false",output_key_prefix:"",output_bucket:"",outputs:[],snapshots:[],output_acls:[],master_playlist:{format:"HLSv3",name:""},success_callback_url:"",failure_callback_url:""},I=function(t){var e={Grantee:t.Grantee};return d.includes(t.Grantee)?e.GranteeType=t.GranteeType:e.GranteeType=t.Grantee.split("@")[1]?"Email":"Canonical",Object.values(t.Access).includes(!1)?(e.Access=[],_.forEach(t.Access,function(t,s){t&&e.Access.push(s)})):e.Access=["FullControl"],e},O=u,b=(s("04a5"),s("048f")),S=Object(b["a"])(O,a,r,!1,null,null,null);S.options.__file="OutputEdit.vue";e["default"]=S.exports},"7f68":function(t,e,s){var a=s("bd18"),r=s("a3ad"),i=s("b3d5").f;t.exports=function(t){return function(e){var s,n=r(e),o=a(n),c=o.length,l=0,u=[];while(c>l)i.call(n,s=o[l++])&&u.push(t?[s,n[s]]:n[s]);return u}}},"84fb":function(t,e,s){"use strict";var a=s("53da"),r=s("7a57"),i=s("af55"),n=s("69d8"),o=s("4b3d"),c=s("cce3"),l=s("e853").f,u=s("8566").f,p=s("9a0d").f,d=s("d079").trim,h="Number",_=a[h],m=_,f=_.prototype,E=i(s("e177")(f))==h,v="trim"in String.prototype,I=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():d(e,3);var s,a,r,i=e.charCodeAt(0);if(43===i||45===i){if(s=e.charCodeAt(2),88===s||120===s)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var n,c=e.slice(2),l=0,u=c.length;l<u;l++)if(n=c.charCodeAt(l),n<48||n>r)return NaN;return parseInt(c,a)}}return+e};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof _&&(E?c(function(){f.valueOf.call(s)}):i(s)!=h)?n(new m(I(e)),s,_):I(e)};for(var O,b=s("f711")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;b.length>S;S++)r(m,O=b[S])&&!r(_,O)&&p(_,O,u(m,O));_.prototype=f,f.constructor=_,s("7e22")(a,h,_)}},a8ed:function(t,e,s){},b33b:function(t,e,s){var a=s("4cee"),r=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&r(t)===t}},b966:function(t,e,s){},c6e4:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._t("groupTitle"),s("table",{staticClass:"table-permission",class:{"dis-in-b":t.isInline},style:t.tableStyle},[s("thead",[s("tr",[s("th",{staticClass:"percent27",style:t.td30Style},[t._v(" "+t._s(t.$t("STORAGE.ACL_GROUP"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.ACL_GROUP_INFO")))])])])],1),s("th",{staticClass:"percent23",style:t.td25Style},[t._v(t._s(t.$t("STORAGE.OBJECT_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.OBJECT_OBJECT_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:t.td25Style},[t._v(t._s(t.$t("STORAGE.ACL_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.OBJECT_ACL_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:t.td20Style})])]),s("tbody",t._l(t.aclData,function(e){return s("tr",{key:e.Grantee},[s("td",[t._v("\n          "+t._s(e.Grantee)+"\n        ")]),s("td",[s("Checkbox",{model:{value:e.Access.Read,callback:function(s){t.$set(e.Access,"Read",s)},expression:"item.Access.Read"}},[t._v(t._s(t.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{model:{value:e.Access.ReadAcp,callback:function(s){t.$set(e.Access,"ReadAcp",s)},expression:"item.Access.ReadAcp"}},[t._v(t._s(t.$t("STORAGE.READ")))]),s("Checkbox",{model:{value:e.Access.WriteAcp,callback:function(s){t.$set(e.Access,"WriteAcp",s)},expression:"item.Access.WriteAcp"}},[t._v(t._s(t.$t("STORAGE.WRITE")))])],1),s("td")])}))]),s("br"),t._t("userTitle"),s("table",{staticClass:"table-permission",class:{"dis-in-b":t.isInline},style:t.tableStyle},[s("thead",[s("tr",[s("th",{staticClass:"percent27",style:t.td30Style},[t._v(" "+t._s(t.$t("STORAGE.USER"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.ACL_USER_INFO")))])])])],1),s("th",{staticClass:"percent23",style:t.td25Style},[t._v(t._s(t.$t("STORAGE.OBJECT_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.OBJECT_OBJECT_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:t.td25Style},[t._v(t._s(t.$t("STORAGE.ACL_PERMISSIONS"))+"\n          "),s("Tooltip",{attrs:{placement:"right"}},[s("span",[s("Icon",{attrs:{type:"ios-help-outline"}})],1),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"white-space":"normal !important"}},[t._v(t._s(t.$t("STORAGE.OBJECT_ACL_PERMISSIONS_INFO")))])])])],1),s("th",{staticClass:"percent25",style:t.td20Style})])]),s("tbody",[t.isAddUser?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUserItem.Grantee,expression:"newUserItem.Grantee"}],staticClass:"new-user-input",domProps:{value:t.newUserItem.Grantee},on:{input:function(e){e.target.composing||t.$set(t.newUserItem,"Grantee",e.target.value)}}})]),s("td",[s("Checkbox",{model:{value:t.newUserItem.Access.Read,callback:function(e){t.$set(t.newUserItem.Access,"Read",e)},expression:"newUserItem.Access.Read"}},[t._v(t._s(t.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{model:{value:t.newUserItem.Access.ReadAcp,callback:function(e){t.$set(t.newUserItem.Access,"ReadAcp",e)},expression:"newUserItem.Access.ReadAcp"}},[t._v(t._s(t.$t("STORAGE.READ")))]),s("Checkbox",{model:{value:t.newUserItem.Access.WriteAcp,callback:function(e){t.$set(t.newUserItem.Access,"WriteAcp",e)},expression:"newUserItem.Access.WriteAcp"}},[t._v(t._s(t.$t("STORAGE.WRITE")))])],1),s("td",[s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{disabled:t.newUserDisabled,size:"small",icon:"checkmark-round"},on:{click:t.addUserOK}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[t._v(t._s(t.$t("PUBLIC.ADD")))])])],1),s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{size:"small",icon:"close-round"},on:{click:function(e){t.isAddUser=!1}}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[t._v(t._s(t.$t("VIDEO.CANCEL")))])])],1)],1)]):t._e(),t._l(t.userAcl,function(e,a){return s("tr",{key:e.Grantee},[s("td",[t._v("\n          "+t._s(e.Grantee)+"\n        ")]),s("td",[s("Checkbox",{attrs:{disabled:t.username==e.Grantee},model:{value:e.Access.Read,callback:function(s){t.$set(e.Access,"Read",s)},expression:"item.Access.Read"}},[t._v(t._s(t.$t("STORAGE.READ")))])],1),s("td",[s("Checkbox",{attrs:{disabled:t.username==e.Grantee},model:{value:e.Access.ReadAcp,callback:function(s){t.$set(e.Access,"ReadAcp",s)},expression:"item.Access.ReadAcp"}},[t._v(t._s(t.$t("STORAGE.READ")))]),s("Checkbox",{attrs:{disabled:t.username==e.Grantee},model:{value:e.Access.WriteAcp,callback:function(s){t.$set(e.Access,"WriteAcp",s)},expression:"item.Access.WriteAcp"}},[t._v(t._s(t.$t("STORAGE.WRITE")))])],1),s("td",[s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",0==a?{staticStyle:{margin:"0 6px"},attrs:{size:"small",icon:"plus-round"},on:{click:t.addUser}}:{staticStyle:{margin:"0 6px",visibility:"hidden"},attrs:{size:"small",icon:"plus-round"}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[t._v(t._s(t.$t("STORAGE.ADD_USER")))])])],1),s("Tooltip",{attrs:{placement:"bottom",delay:1e3}},[s("Button",{staticStyle:{margin:"0 6px"},attrs:{disabled:t.username==e.Grantee,size:"small",icon:"minus-round"},on:{click:function(e){t.deleteUser(a)}}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",[t._v(t._s(t.$t("STORAGE.DELETE_USER")))])])],1)],1)])})],2)])],2)},r=[],i=(s("84fb"),{props:{aclData:{type:Array,required:!0,default:function(){return o}},userAcl:{type:Array,required:!0,default:function(){return this.owerACL}},isInline:{type:Boolean,default:function(){return!1}},width:{type:Number}},data:function(){return{iconSize:16,isAddUser:!1,newUserItem:_.cloneDeep(n),userACLList:_.cloneDeep(this.userAcl)}},computed:{newUserDisabled:function(){var t=this.newUserItem.Grantee,e=this.newUserItem.Access,s=e.Read,a=e.ReadAcp,r=e.WriteAcp;return""===t||!(s||a||r)},username:function(){return this.$store.state.current.username},tableStyle:function(){return this.width?{width:"".concat(this.width,"px")}:{}},td30Style:function(){return this.width?{width:"".concat(this.width-parseInt(.2*this.width)-parseInt(.25*this.width*2),"px")}:{}},td20Style:function(){return this.width?{width:"".concat(parseInt(.2*this.width),"px")}:{}},td25Style:function(){return this.width?{width:"".concat(parseInt(.25*this.width),"px")}:{}}},methods:{addUser:function(){this.isAddUser=!0,this.newUserItem=_.cloneDeep(n)},addUserOK:function(){this.userAcl.push(this.newUserItem),this.isAddUser=!1},deleteUser:function(t){this.userAcl.splice(t,1)}}}),n={Grantee:"",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}},o=[{GranteeType:"Group",Grantee:"AllUsers",Access:{Read:!0,ReadAcp:!1,WriteAcp:!1}},{GranteeType:"Group",Grantee:"AuthenticatedUsers",Access:{Read:!1,ReadAcp:!1,WriteAcp:!1}}],c=i,l=(s("4cc3"),s("048f")),u=Object(l["a"])(c,a,r,!1,null,null,null);u.options.__file="fileAcl.vue";e["a"]=u.exports},d079:function(t,e,s){var a=s("8718"),r=s("5b8a"),i=s("cce3"),n=s("3542"),o="["+n+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),p=function(t,e,s){var r={},o=i(function(){return!!n[t]()||c[t]()!=c}),l=r[t]=o?e(d):n[t];s&&(r[s]=l),a(a.P+a.F*o,"String",r)},d=p.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},d654:function(t,e,s){var a=s("8718");a(a.S,"Number",{isInteger:s("b33b")})},e853:function(t,e,s){var a=s("6220"),r=s("bea0").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},f25b:function(t,e,s){"use strict";function a(t){if(Array.isArray(t))return t}function r(t,e){var s=[],a=!0,r=!1,i=void 0;try{for(var n,o=t[Symbol.iterator]();!(a=(n=o.next()).done);a=!0)if(s.push(n.value),e&&s.length===e)break}catch(t){r=!0,i=t}finally{try{a||null==o["return"]||o["return"]()}finally{if(r)throw i}}return s}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,e){return a(t)||r(t,e)||i()}s.d(e,"a",function(){return n})}}]);