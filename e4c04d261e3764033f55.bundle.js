(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-716d2250"],{"1aa1b":function(t,a,s){},3832:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"group"},[s("div",{staticClass:"info-title"},[t._v(t._s(t.titles.groupTitle))]),s("div",{staticClass:"content"},t._l(t.data.basicInfo,function(a){return s("div",{key:a.name,staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),a.tooltip?s("Tooltip",{attrs:{content:a.tooltip,placement:"top"}},[s("span",[t._v(t._s(a.name)+": ")])]):s("span",[t._v(t._s(a.name)+": ")]),s("span",{class:{redFont:a.isRed}},[t._v(t._s(a.value))])],1)}))]),s("div",{staticClass:"group",staticStyle:{"border-top":"0"}},[s("div",{staticClass:"info-title"},[t._v(t._s(t.titles.partitionTitle))]),t.spinGroup?s("Spin",{staticClass:"search-spin",attrs:{size:"bigger",fix:""}}):t._e(),s("div",{staticClass:"content content-scroll"},[s("ul",{staticClass:"partition-title"},t._l(t.data.detailHead,function(a){return s("li",{key:a.name},[t._v(t._s(a.name))])})),0===t.data.tableData.length?s("h1",{staticClass:"no-data"},[t._v("No Group")]):t._e(),t._l(t.data.tableData.reverse(),function(a){return s("ul",{key:a.partition_idx,staticClass:"partition-list"},t._l(t.data.detailHead,function(e){return s("li",{key:e.name,class:{redFont:t.redList(e.value,a[e.value])}},[t._v(t._s(a[e.value]))])}))})],2)],1)])},i=[],n={props:["titles","data","spinGroup"],data:function(){return{}},methods:{redList:function(t,a){var s=parseFloat(String(a).slice(0,-1));return"ioutil"===t&&s>90||"space"===t&&s>99||"cpu"===t&&s>20}}},r=n,o=(s("f23b"),s("048f")),c=Object(o["a"])(r,e,i,!1,null,"59968686",null);c.options.__file="detailModal.vue";a["a"]=c.exports},5334:function(t,a,s){"use strict";var e=s("febe"),i=s.n(e);i.a},6614:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"bsc-system bsc-group"},[s("div",{staticClass:"header-card-wrap"},[s("div",{staticClass:"header-card"},[s("div",[s("Icon",{attrs:{type:"ios-analytics",size:t.iconSize,color:t.iconColor}})],1),t._m(0)]),s("div",{staticClass:"header-card"},[s("div",[s("Icon",{attrs:{type:"aperture",size:t.iconSize,color:t.iconColor}})],1),t._m(1)]),s("div",{staticClass:"header-card"},[s("div",[s("Icon",{attrs:{type:"filing",size:t.iconSize,color:t.iconColor}})],1),t._m(2)]),s("div",{staticClass:"header-card"},[s("div",[s("Icon",{attrs:{type:"soup-can",size:t.iconSize,color:t.iconColor}})],1),t._m(3)]),s("div",{staticClass:"header-card"},[s("div",[s("Icon",{attrs:{type:"soup-can",size:t.iconSize,color:t.iconColor}})],1),t._m(4)])]),s("legend-list",{attrs:{data:t.legendList}}),s("div",{staticClass:"header"},[s("div",{staticClass:"search",on:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.getGroupList(!1)}}},[s("Select",{staticStyle:{width:"180px","margin-right":"8px"},attrs:{prepend:!0},model:{value:t.searchType,callback:function(a){t.searchType=a},expression:"searchType"}},[s("Icon",{attrs:{slot:"prepend",size:"18",type:"ios-grid-view"},slot:"prepend"}),s("Option",{attrs:{value:"group_id"}},[t._v("Group ID")]),s("Option",{attrs:{value:"node_ip"}},[t._v("Server IP")]),s("Option",{attrs:{value:"partition_id"}},[t._v("Partition ID")])],1),s("Input",{staticStyle:{width:"260px"},attrs:{placeholder:t.$t("SYSTEM.PLEASE_ENTER")},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),s("Button",{attrs:{type:"primary"},on:{click:function(a){t.getGroupList(!1)}}},[t._v(t._s(t.$t("SYSTEM.SEARCH")))]),s("Button",{attrs:{type:"primary"},on:{click:function(a){t.resetParams()}}},[t._v(t._s(t.$t("PUBLIC.RESET")))]),t.searchValueError?s("p",{staticClass:"redFont search-info"},[t._v(t._s(t.$t("SYSTEM.GROUP_ID_SEARCH_INFO")))]):t._e()],1),s("div",{staticClass:"status"},[s("span",{staticClass:"group-status-prefix"},[t._v(t._s(t.$t("SYSTEM.GROUP_STATUS"))+":")]),s("button",{class:{statusButtonFocus:0===t.read_only},on:{click:function(a){t.read_only=0}}},[t._v(t._s(t.$t("SYSTEM.WRITEABLE")))]),s("button",{class:{statusButtonFocus:1===t.read_only},on:{click:function(a){t.read_only=1}}},[t._v(t._s(t.$t("SYSTEM.READ_ONLY")))]),s("button",{class:{statusButtonFocus:"ignore"===t.read_only},on:{click:function(a){t.read_only="ignore"}}},[t._v(t._s(t.$t("SYSTEM.ALL")))])])]),s("div",{staticClass:"content"},[t.spinShow?s("Spin",{attrs:{size:"bigger",fix:""}}):t._e(),s("div",{staticClass:"section-chart-tab"},[s("button",{class:{buttonFocus:"group_id"===t.showChart},on:{click:function(a){t.tabToggle("group_id")}}},[t._v(t._s(t.$t("SYSTEM.CREATE_TIME"))+" "+t._s(t.$t("SYSTEM.DESCENDINHG_ORDER")))]),s("button",{class:{buttonFocus:"cpu"===t.showChart},on:{click:function(a){t.tabToggle("cpu")}}},[t._v("CPU Load "+t._s(t.$t("SYSTEM.DESCENDINHG_ORDER")))]),s("button",{class:{buttonFocus:"ioutil"===t.showChart},on:{click:function(a){t.tabToggle("ioutil")}}},[t._v("IO "+t._s(t.$t("SYSTEM.DESCENDINHG_ORDER")))]),s("button",{class:{buttonFocus:"space"===t.showChart},on:{click:function(a){t.tabToggle("space")}}},[t._v(t._s(t.$t("SYSTEM.CAPACITY_UTILIZATION_RATE"))+" "+t._s(t.$t("SYSTEM.DESCENDINHG_ORDER")))]),s("div",{staticClass:"refresh-section"},[s("span",{on:{click:function(a){t.getGroupList(!1,!0)}}},[s("Icon",{attrs:{type:"refresh",size:"20"}})],1)])]),s("div",{staticClass:"section-chart"},[s("div",{staticClass:"card-chart"},[0===t.groupList.length?s("h1",{staticClass:"no-data"},[t._v("No Groups")]):t._e(),t._l(t.groupList,function(a){return s("group-card",{key:a.group_id,attrs:{data:a,sortBy:t.showChart}})}),s("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.nextGroupId&&void 0!==t.nextGroupId,expression:"nextGroupId !== null && nextGroupId !== undefined "}],staticClass:"show-more",on:{click:function(a){t.getGroupList(!0)}}},[s("p",[t._v("show more")]),s("Icon",{attrs:{type:"chevron-down"}})],1)],2)])],1)],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("p",[t._v("13,899个")]),s("p",[t._v("group数")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("p",[t._v("10G")]),s("p",[t._v("group平均大小")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("p",[t._v("60G")]),s("p",[t._v("group最大大小")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("p",[t._v("871KB")]),s("p",[t._v("group5分位大小")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("p",[t._v("40G")]),s("p",[t._v("group9分位大小")])])}],n=(s("4141"),s("25d7"),s("da47")),r=(s("9382"),s("b267")),o=(s("aba3"),s("3a0f"),s("a3a3"),s("4d0b"),s("365c")),c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"bsc-system-card bsc-group-card"},[s("div",{staticClass:"header"},[s("Icon",{attrs:{type:"android-star",size:"16",color:t.iconColor}}),s("span",[t._v(t._s(t.data.group_id))]),s("Button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.showDetailModal=!0}}},[t._v(t._s(t.$t("SYSTEM.DETAILS")))])],1),s("div",{staticClass:"content"},[s("div",{staticClass:"files"},[s("span",[t._v(t._s(t.$t("SYSTEM.CREATE_TIME"))+": "+t._s(t.data.ts))]),s("div",{staticClass:"progress"},[s("span",{staticClass:"file-count"},[t._v(t._s(t.$t("SYSTEM.FILE_NUMBERS"))+": "+t._s(t.thousands(t.data.num_used)))]),t._v("\n        "+t._s(t.$t("SYSTEM.USED_CAPACITY"))+": "+t._s(t.bytes(t.data.space_used))+"\n      ")])]),s("div",{staticClass:"ip"},[s("ul",{staticClass:"ip-title"},[s("li",[t._v("IP")]),s("li",[t._v(t._s(t.$t("SYSTEM.USED_CAPACITY")))]),s("li",[t._v("IO")]),s("li",[t._v("CPU")]),s("li",[t._v("Handle")])]),t._l(t.data.partition,function(a){return s("ul",{key:a.partition_idx,staticClass:"ip-list"},[s("li",[t._v(t._s(a.inn_ips[0]))]),s("li",{class:{redFont:a.used_rate>99}},[t._v(t._s(a.used_rate?a.used_rate+"%":"--"))]),s("li",{class:{redFont:a.ioutil>90}},[t._v(t._s(a.ioutil?a.ioutil+"%":"--"))]),s("li",{class:{redFont:a.cpu>20}},[t._v(t._s(a.cpu?a.cpu.toFixed(2)+"%":"--"))]),1===a.readonly?s("li",[t._v(t._s(t.$t("SYSTEM.MIGRATION")))]):s("li",[s("span",{staticClass:"ip-button",on:{click:function(s){t.migrate(a)}}},[t._v(t._s(t.$t("SYSTEM.MIGRATE")))])])])})],2)]),s("div",{staticClass:"footer"},[s("span",[t._v(t._s(0===t.data.readonly?t.$t("SYSTEM.WRITEABLE"):t.$t("SYSTEM.READ_ONLY")))]),s("Button",{directives:[{name:"show",rawName:"v-show",value:0===this.data.readonly,expression:"this.data.readonly === 0"}],attrs:{type:"ghost",size:"small"},on:{click:t.setReadOnly}},[t._v(t._s(t.$t("SYSTEM.SET_READ_ONLY")))])],1),s("Modal",{attrs:{title:t.$t("SYSTEM.DETAILS"),width:"970"},model:{value:t.showDetailModal,callback:function(a){t.showDetailModal=a},expression:"showDetailModal"}},[s("detail-modal",{staticClass:"group-modal",attrs:{titles:t.modalTitles,data:t.modalData}}),t.data.traffic?s("div",{staticClass:"section-separator",staticStyle:{"margin-top":"24px"}},[s("div",{staticClass:"separator-body"},[s("span",{staticClass:"separator-icon"}),s("span",{staticClass:"separator-info",staticStyle:{"font-size":"18px"}},[t._v(t._s(t.$t("SYSTEM.MIGRATION")))])])]):t._e(),t.data.traffic?s("div",{staticClass:"group"},[s("div",{staticClass:"content"},[s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v("Partition: "+t._s(t.data.traffic.src_partition_id[0])+"\n        ")]),s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v("Target partition: "+t._s(t.data.traffic.target_partition_id)+"\n        ")]),s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v(t._s(t.$t("SYSTEM.MIGRATION"))+": "+t._s(t.data.traffic.process)+"%\n        ")]),s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v(t._s(t.$t("SYSTEM.TIME_SPENT"))+": "+t._s(t.data.traffic.spent_time)+"\n        ")]),s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v("Speed: "+t._s(t.bytes(t.data.traffic.speed))+"/S\n        ")]),s("div",{staticClass:"group-item"},[s("span",{staticClass:"separator-icon"}),t._v(t._s(t.$t("SYSTEM.REMAINING_TIME"))+": "+t._s(t.data.traffic.left_time)+"\n        ")])])]):t._e(),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(a){t.showDetailModal=!1}}},[t._v(t._s(t.$t("PUBLIC.CLOSE")))])],1)],1)],1)},u=[],l=s("7265"),p=s("3832"),d={components:{detailModal:p["a"]},props:["data"],data:function(){return{showDetailModal:!1,status:0===this.data.readonly?this.$t("SYSTEM.WRITEABLE"):this.$t("SYSTEM.READ_ONLY"),modalTitles:{groupTitle:this.$t("SYSTEM.GROUP_INFO_TITLE"),partitionTitle:this.$t("SYSTEM.PARTITION_INFO")},detailHead:[{name:"Partition ID",value:"partition_id"},{name:this.$t("SYSTEM.MEDIA_TYPE"),value:"media_type"},{name:"IDC",value:"idc"},{name:"IP",value:"inn_ips"},{name:"IO",value:"ioutil"},{name:this.$t("SYSTEM.CAPACITY"),value:"space"},{name:"CPU",value:"cpu"},{name:this.$t("SYSTEM.RW_STATUS"),value:"status"},{name:this.$t("SYSTEM.IS_DEL"),value:"isUse"}]}},computed:{iconColor:function(){return 0===this.data.readonly?"#00a854":"#f85959"},modalData:function(){var t=this,a=_.map(this.data.partition,function(a){var s=_.cloneDeep(a);return s.inn_ips=a.inn_ips[0],s.ioutil=a.ioutil?"".concat(a.ioutil,"%"):"--",s.space=a.used_rate?"".concat(a.used_rate,"%"):"--",s.cpu=a.cpu?"".concat(a.cpu.toFixed(2),"%"):"--",s.status=0===a.readonly?t.$t("SYSTEM.WRITEABLE"):t.$t("SYSTEM.READ_ONLY"),s.isUse=0===a.is_del?t.$t("SYSTEM.NORMAL"):t.$t("SYSTEM.DELETED"),s}),s=[{name:"Group ID",value:this.data.group_id},{name:this.$t("SYSTEM.GROUP_STATUS"),value:0===this.data.readonly?this.$t("SYSTEM.WRITEABLE"):this.$t("SYSTEM.READ_ONLY")},{name:this.$t("SYSTEM.FILE_NUMBERS"),value:Object(l["m"])(this.data.num_used)},{name:this.$t("SYSTEM.USED_CAPACITY"),value:Object(l["d"])(this.data.space_used)},{name:this.$t("SYSTEM.CREATE_TIME"),value:this.data.ts},{name:this.$t("SYSTEM.CLOSE_TIME"),value:0===this.data.close_ts?this.$t("SYSTEM.NOT_CLOSED"):this.data.close_ts}];return{tableData:a,basicInfo:s,detailHead:this.detailHead}}},methods:{migrate:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$Loading.start(),t.next=4,Object(o["M"])({group_id:this.data.group_id,src_partition_id:a.partition_id});case 4:a.readonly=1,this.$Loading.finish(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$Loading.error();case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return function(a){return t.apply(this,arguments)}}(),setReadOnly:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$Loading.start(),t.next=4,Object(o["N"])({group_id:this.data.group_id});case 4:this.data.readonly=1,this.status=this.$t("SYSTEM.READ_ONLY"),this.$Loading.finish(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$Loading.error();case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),bytes:l["d"],thousands:l["m"]}},h=d,v=(s("a394"),s("048f")),S=Object(v["a"])(h,c,u,!1,null,"4e136fc3",null);S.options.__file="GroupCard.vue";var f=S.exports,E=s("e9b81"),g={components:{groupCard:f,legendList:E["a"]},data:function(){return{searchType:"group_id",searchValue:"",read_only:0,showChart:"group_id",groupList:[],nextGroupId:0,spinShow:!0,pageCount:20,iconSize:36,iconColor:"#6bbefc",legendList:[{text:"group:存储单元"},{text:"server:服务器"},{text:"partition:磁盘"}]}},computed:{searchValueError:function(){return"group_id"===this.searchType&&!!this.searchValue&&!parseInt(this.searchValue.replace(/\s+/g,""))}},watch:{read_only:function(){this.cleanParams(),this.getGroupList(!1,!0)},showChart:function(t){this.getSortedGroupList(this.groupList,t)}},created:function(){this.getGroupList()},methods:{tabToggle:function(t){this.showChart=t},getGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var a,s,e,i=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=i.length>0&&void 0!==i[0]&&i[0],!this.searchValueError){t.next=4;break}return this.$Message.warning(this.$t("SYSTEM.GROUP_ID_SEARCH_INFO")),t.abrupt("return");case 4:return t.prev=4,this.spinShow=!0,this.$Loading.start(),t.next=9,Object(o["k"])((s={start_group_id:a?this.nextGroupId:"group_id"===this.searchType&&this.searchValue?parseInt(this.searchValue.replace(/\s+/g,"")):0},Object(n["a"])(s,this.searchType,this.searchValue.replace(/\s+/g,"")||"ignore"),Object(n["a"])(s,"count",this.pageCount),Object(n["a"])(s,"read_only",this.read_only),s));case 9:e=t.sent,this.nextGroupId=e.next_group_id,e.group?(this.addPartitionCountToGroup(e.group),this.groupList=a?this.getSortedGroupList(this.groupList.concat(e.group),this.showChart):this.getSortedGroupList(e.group,this.showChart)):(this.groupList=[],this.$Message.warning(e)),this.spinShow=!1,this.$Loading.finish(),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](4),this.spinShow=!1,this.$Loading.error();case 20:case"end":return t.stop()}},t,this,[[4,16]])}));return function(){return t.apply(this,arguments)}}(),addPartitionCountToGroup:function(t){t.forEach(function(t){t.cpu=0,t.ioutil=0,t.space=0,_.forIn(t.partition,function(a){a.cpu>t.cpu&&(t.cpu=a.cpu),a.ioutil>t.ioutil&&(t.ioutil=a.ioutil),a.used_rate>t.space&&(t.space=a.used_rate)})})},getSortedGroupList:function(t,a){return t.length>0&&t.sort(function(t,s){return"group_id"===a?t.group_id-s.group_id:s[a]-t[a]})},resetParams:function(){this.cleanParams(),this.searchType="group_id"},cleanParams:function(){this.nextGroupId=0,this.start_group_id=0,this.searchValue=""}}},C=g,T=(s("5334"),Object(v["a"])(C,e,i,!1,null,"f10405c8",null));T.options.__file="Group.vue";a["default"]=T.exports},"787e":function(t,a,s){},"83ef":function(t,a,s){},a046:function(t,a,s){"use strict";var e=s("1aa1b"),i=s.n(e);i.a},a394:function(t,a,s){"use strict";var e=s("83ef"),i=s.n(e);i.a},e9b81:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"bsc-legend"},t._l(t.data,function(a){return s("div",{key:a.text,staticClass:"legend-item"},[s("Icon",{attrs:{type:a.icon,size:"14"}}),s("span",{staticClass:"legend-text"},[t._v(t._s(t.$t(a.text)))]),a!==t.data[t.data.length-1]?s("span",{staticClass:"legend-separator"},[t._v("|")]):t._e()],1)}))},i=[],n={props:["data"]},r=n,o=(s("a046"),s("048f")),c=Object(o["a"])(r,e,i,!1,null,"ea96999c",null);c.options.__file="legend.vue";a["a"]=c.exports},f23b:function(t,a,s){"use strict";var e=s("787e"),i=s.n(e);i.a},febe:function(t,a,s){}}]);