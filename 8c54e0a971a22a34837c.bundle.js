(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8fc1906"],{"0b66":function(t,e,i){},"1aa1b":function(t,e,i){},"9df6":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bsc-system bsc-traffic"},[i("legend-list",{attrs:{data:t.legendList}}),i("div",{staticClass:"header"},[i("div",{staticClass:"search",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getFilterTrafficList(!0)}}},[i("Select",{staticStyle:{width:"180px","margin-right":"8px"},attrs:{prepend:!0},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[i("Icon",{attrs:{slot:"prepend",size:"18",type:"ios-grid-view"},slot:"prepend"}),i("Option",{attrs:{value:"group_id"}},[t._v("Group ID")]),i("Option",{attrs:{value:"server_ip"}},[t._v("Server IP")]),i("Option",{attrs:{value:"partition_id"}},[t._v("Partition ID")])],1),i("Input",{staticStyle:{width:"260px"},attrs:{placeholder:t.$t("SYSTEM.PLEASE_ENTER")+t.searchType},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),i("Button",{attrs:{type:"primary"},on:{click:function(e){t.getFilterTrafficList(!0)}}},[t._v(t._s(t.$t("SYSTEM.SEARCH")))])],1),i("div",{staticClass:"status"},[i("span",{staticClass:"group-status-prefix"},[t._v(t._s(t.$t("SYSTEM.GROUP_STATUS"))+" :")]),i("button",{class:{statusButtonFocus:"group_all"===t.tabName},on:{click:function(e){t.tabName="group_all",t.getFilterTrafficList()}}},[t._v(t._s(t.$t("SYSTEM.ALL")))]),i("button",{class:{statusButtonFocus:"preparing"===t.tabName},on:{click:function(e){t.tabName="preparing",t.getFilterTrafficList()}}},[t._v("preparing")]),i("button",{class:{statusButtonFocus:"moving"===t.tabName},on:{click:function(e){t.tabName="moving",t.getFilterTrafficList()}}},[t._v("moving")]),i("button",{class:{statusButtonFocus:"finished"===t.tabName},on:{click:function(e){t.tabName="finished",t.getFilterTrafficList()}}},[t._v("finished")]),i("div",{staticClass:"refresh-section"},[i("span",{on:{click:function(e){t.refresh()}}},[i("Icon",{attrs:{type:"refresh",size:"20"}})],1)])])]),i("div",{staticClass:"content"},[t.spinShow?i("Spin",{attrs:{size:"bigger",fix:""}}):t._e(),i("Table",{attrs:{border:"",context:t.self,stripe:!0,columns:t.listHeader,data:t.trafficList,"no-data-text":t.$t("STORAGE.NO_LIST")}})],1)],1)},s=[],a=(i("25d7"),i("9382"),i("b267")),n=i("365c"),c=i("e9b81"),o={components:{legendList:c["a"]},data:function(){return{self:this,searchType:"group_id",searchValue:"",spinShow:!0,tabName:"group_all",trafficListAll:[],trafficList:[],legendList:[{text:"group:存储单元"},{text:"server:服务器"},{text:"partition:磁盘"}],listHeader:[{title:"Group ID",key:"group_id",width:150},{title:this.$t("SYSTEM.PROGRESS"),key:"process_percent",width:150,sortable:!0,render:function(t,e){return t("Progress",{props:{percent:e.row.process_percent}})}},{title:this.$t("SYSTEM.TIME_SPENT"),key:"spent_time",width:150},{title:this.$t("SYSTEM.REMAINING_TIME"),key:"left_time",width:150,sortable:!0,sortMethod:function(t,e,i){return t.length!==e.length?"asc"===i?t.length-e.length:e.length-t.length:"asc"===i?t>e?1:-1:t<e?1:-1}},{title:this.$t("SYSTEM.GROUP_STATUS"),key:"group_status",width:150},{title:this.$t("SYSTEM.SOURCE_DISK"),key:"source_disk",width:200,render:function(t,e){return t("div",{style:{padding:"8px 0"}},e.row.source_disk.map(function(e){return[t("Tooltip",{props:{content:e[2],placement:"top-end"}},[t("div",{style:{margin:"2px 0"}},"".concat(e[0],":/s2/drive/").concat(e[1]))]),t("br")]}))}},{title:this.$t("SYSTEM.TARGET_DISK"),key:"target_disk",width:200,render:function(t,e){return t("Tooltip",{props:{content:e.row.target_disk[2],placement:"top-end"}},"".concat(e.row.target_disk[0],":/s2/drive/").concat(e.row.target_disk[1]))}}]}},created:function(){this.getTrafficList()},methods:{getTrafficList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,i,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]&&r[0],this.spinShow=!0,this.$Loading.start(),t.prev=3,t.next=6,Object(n["x"])();case 6:i=t.sent,this.trafficListAll=this.convert2Front(i),e||(this.trafficList=this.trafficListAll),this.spinShow=!1,this.$Loading.finish(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),this.spinShow=!1,this.$Loading.error();case 17:case"end":return t.stop()}},t,this,[[3,13]])}));return function(){return t.apply(this,arguments)}}(),convert2Front:function(t){var e=[];return _.forEach(t,function(t,i){var r={group_id:i,process_percent:t.process?t.process:0,spent_time:t.spent_time?t.spent_time:"-",left_time:t.left_time?t.left_time:"-",group_status:t.step,src_server_ip:t.src_node_ip,src_partition_id:t.src_partition_id,source_disk:t.src_node_ip.map(function(e,i){return[e,t.src_partition_paths[i].slice(-3),t.src_partition_id[i]]}),target_disk:[t.target_node_ip?t.target_node_ip[0]:"-",t.target_partition_path?t.target_partition_path.slice(-3):"-",t.target_partition_id?t.target_partition_id:"-"]};e.push(r)}),e},getFilterTrafficList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.tabName="group_all");var i="group_id"===this.searchType?this.trafficListAll.filter(function(e){return e.group_id>=t.searchValue}):this.searchValue?this.trafficListAll.filter(function(e){return"server_ip"===t.searchType?e.src_server_ip.indexOf(t.searchValue)>=0:e.src_partition_id.indexOf(t.searchValue)>=0}):this.trafficListAll;this.trafficList="group_all"===this.tabName?i:i.filter(function(e){return e.group_status===t.tabName})},refresh:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getTrafficList(!0);case 2:this.getFilterTrafficList();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},l=o,p=(i("a150"),i("048f")),u=Object(p["a"])(l,r,s,!1,null,"c100f95c",null);u.options.__file="Traffic.vue";e["default"]=u.exports},a046:function(t,e,i){"use strict";var r=i("1aa1b"),s=i.n(r);s.a},a150:function(t,e,i){"use strict";var r=i("0b66"),s=i.n(r);s.a},e9b81:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bsc-legend"},t._l(t.data,function(e){return i("div",{key:e.text,staticClass:"legend-item"},[i("Icon",{attrs:{type:e.icon,size:"14"}}),i("span",{staticClass:"legend-text"},[t._v(t._s(t.$t(e.text)))]),e!==t.data[t.data.length-1]?i("span",{staticClass:"legend-separator"},[t._v("|")]):t._e()],1)}))},s=[],a={props:["data"]},n=a,c=(i("a046"),i("048f")),o=Object(c["a"])(n,r,s,!1,null,"ea96999c",null);o.options.__file="legend.vue";e["a"]=o.exports}}]);