(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-438b"],{"1c4c":function(t,e,n){"use strict";var r=n("9b43"),u=n("5ca1"),i=n("4bf8"),c=n("1fa8"),a=n("33a4"),o=n("9def"),s=n("f1ae"),l=n("27ee");u(u.S+u.F*!n("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,u,f,d=i(t),h="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,k=void 0!==b,m=0,g=l(d);if(k&&(b=r(b,p>2?arguments[2]:void 0,2)),void 0==g||h==Array&&a(g))for(e=o(d.length),n=new h(e);e>m;m++)s(n,m,k?b(d[m],m):d[m]);else for(f=g.call(d),n=new h;!(u=f.next()).done;m++)s(n,m,k?c(f,b,[u.value,m],!0):u.value);return n.length=m,n}})},2001:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bsc-bucket"},[t.isSubUser?t._e():n("div",{staticClass:"layout-bsc-toolbar"},[n("div",[n("Button",{staticClass:"button-bsc-add-bucket",attrs:{type:"primary"},on:{click:function(e){t.createBucketModal=!0}}},[t._v(t._s(t.$t("STORAGE.ADD_BUCKET")))]),n("Tooltip",{attrs:{content:t.$t("STORAGE.FOLDER_INFO"),disabled:!!t.selectedBucket.Name,placement:"top"}},[n("Button",{staticClass:"button-bsc-add-bucket",attrs:{disabled:!t.selectedBucket.Name,type:"primary"},on:{click:function(e){t.goBucketSettings()}}},[t._v(t._s(t.$t("STORAGE.BUCKET_SETTING")))])],1),n("Tooltip",{attrs:{content:t.$t("STORAGE.FOLDER_INFO"),disabled:!!t.selectedBucket.Name,placement:"top"}},[n("Button",{staticClass:"button-bsc-add-bucket",attrs:{disabled:!t.selectedBucket.Name,type:"primary"},on:{click:function(e){t.goPictureStyles()}}},[t._v(t._s(t.$t("STORAGE.PIC_STYLE")))])],1),n("Tooltip",{attrs:{content:t.$t("STORAGE.FOLDER_INFO"),disabled:!!t.selectedBucket.Name,placement:"top"}},[n("Button",{staticClass:"button-bsc-add-bucket",attrs:{disabled:!t.selectedBucket.Name,type:"primary"},on:{click:function(e){t.deleteBucketConfirm()}}},[t._v(t._s(t.$t("STORAGE.DELETE_BUCKET")))])],1)],1)]),n("div",{staticClass:"bsc-flex-section"},t._l(t.bucketList,function(e){return n("div",{directives:[{name:"cbutton",rawName:"v-cbutton"}],key:e.Name,staticClass:"bucket",class:{"bucket-selected":e.selected},on:{click:function(n){t.rowClick(e)},dblclick:function(n){t.dbClick(e)}}},[n("span",{staticClass:"span-filename"},[t._v(t._s(e.Name))])])})),n("Modal",{attrs:{title:t.$t("STORAGE.ADD_BUCKET")},on:{"on-ok":t.addBucket,"on-cancel":function(e){t.inputCheck=!1,t.createBucketValue=""}},model:{value:t.createBucketModal,callback:function(e){t.createBucketModal=e},expression:"createBucketModal"}},[n("Input",{attrs:{autofocus:"",placeholder:t.$t("STORAGE.ADD_BUCKET_PLACEHOLDER"),pattern:"/^([a-z0-9][a-z0-9\\-]*[.])*([a-z0-9][a-z0-9\\-]*)*$/"},on:{"on-enter":t.addBucket},model:{value:t.createBucketValue,callback:function(e){t.createBucketValue=e},expression:"createBucketValue"}}),n("span",{staticClass:"info-input-error"},[t._v(t._s(t.inputCheck?t.$t("STORAGE.ADD_BUCKET_CHECK"):""))])],1)],1)},u=[],i=(n("a481"),n("96cf"),n("3040")),c=(n("1c4c"),n("ac6a"),n("ff66")),a=n("7265"),o=n("c1df"),s=n.n(o),l=n("7340"),f=n("4360"),d=n("752a"),h={directives:{cbutton:{bind:function(t){$(t).click(function(){$(t).toggleClass("bucket-selected"),Array.from($(t).siblings()).forEach(function(e){e!==t&&$(e).removeClass("bucket-selected")})})}}},data:function(){return{createBucketValue:"",createBucketModal:!1,inputCheck:!1,bucketList:[],selectedBucket:{},iconSize:18}},computed:{bucket:function(){return this.$route.params.bucket||""},isSubUser:function(){return Object(l["a"])("SUBUSER")}},watch:{createBucketValue:function(t){this.inputCheck=!(t.length>=3)}},created:function(){this.getBucketList()},methods:{getBucketList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r=this,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]&&u[0],t.next=3,this.$store.dispatch("getBuckets",e);case 3:n=t.sent,this.isSubUser?n.Buckets.forEach(function(t){r.getBucketAcl(t.Name).then(function(e){e.Grants.forEach(function(e){e.Grantee.ID!==f["a"].state.current.username||"FULL_CONTROL"!==e.Permission&&"READ"!==e.Permission||(t.CreationDate=s()(t.CreationDate).format("YYYY-MM-DD HH:mm"),r.bucketList.push(t))})})}):this.bucketList=_.forEach(n.Buckets,function(t){t.CreationDate=s()(t.CreationDate).format("YYYY-MM-DD HH:mm")}),this.bucketList=_.forEach(this.bucketList,function(t,e){t.selected=r.bucket?t.Name===r.bucket:0===e}),this.selectedBucket=this.bucketList&&this.bucketList.length>0?this.bucketList[0]:{};case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteBucketConfirm:function(){var t=this,e=this.selectedBucket;this.$Modal.confirm({content:this.$t("STORAGE.DELETE_CONFIRMED",{fileName:e.Name}),okText:this.$t("PUBLIC.CONFIRMED"),cancelText:this.$t("PUBLIC.CANCLE"),title:this.$t("PUBLIC.DELETE"),onOk:function(){return t.deleteBucket(e)}})},deleteBucket:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$Loading.start(),t.next=4,Object(c["d"])("listObjects",{Bucket:e.Name});case 4:return n=t.sent,t.next=7,n.Contents.length;case 7:if(!t.sent){t.next=11;break}t.t0=p(n.Contents,e.Name),t.next=12;break;case 11:t.t0=Promise.resolve();case 12:r=t.t0,r.then(function(){setTimeout(function(){Object(c["d"])("deleteBucket",{Bucket:e.Name})},1e3)}),Object(a["l"])(this.bucketList,e),this.selectedBucket={},_.each(document.querySelector(".bsc-flex-section").childNodes,function(t){t.classList.remove("bucket-selected")}),this.$Loading.finish(),t.next=23;break;case 20:t.prev=20,t.t1=t["catch"](0),this.$Loading.error();case 23:case"end":return t.stop()}},t,this,[[0,20]])}));return function(e){return t.apply(this,arguments)}}(),goBucketSettings:function(){var t=this.selectedBucket;this.$router.push({name:"bucketSettings",params:{bucket:t.Name,tabName:"permission"}})},goPictureStyles:function(){var t=this.selectedBucket;this.$router.push({name:"pictureStyles",params:{bucket:t.Name}})},rowClick:function(t){this.selectedBucket=this.selectedBucket===t?{}:t},addBucket:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.createBucketModal=!1,this.createBucketValue=this.createBucketValue.trim(),!(this.createBucketValue.length>2)){t.next=12;break}return t.next=5,Object(c["d"])("createBucket",{Bucket:this.createBucketValue});case 5:return this.$Message.success(this.$t("STORAGE.ADD_BUCKET_SUCCESS")),t.next=8,this.getBucketList(!0);case 8:Object(l["a"])("SUB")&&this.createRedirectBucket(this.createBucketValue),this.createBucketValue="",t.next=13;break;case 12:this.$Message.warning(this.$t("STORAGE.ADD_BUCKET_CHECK"));case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),dbClick:function(t){this.$router.push({name:"file",params:{bucket:t.Name,prefix:"noprefix"}})},getBucketAcl:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])("getBucketAcl",{Bucket:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),createRedirectBucket:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(d["u"]);case 2:return n=t.sent,t.next=5,Promise.all(Array.map(n,function(t){return r.$http.post(d["t"],{original:e,email:t.email,redirect:e+"-"+t.username.replace(/\W|_/g,"").toLowerCase(),bucket_acl:["READ_ACP"],file_acl:["READ_ACP"]})}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},p=function(t,e){return Promise.all(Array.map(t,function(t){return Object(c["d"])("deleteObject",{Bucket:e,Key:t.Key||t.Prefix})}))},b=h,k=(n("3bfc"),n("2877")),m=Object(k["a"])(b,r,u,!1,null,"467aab1d",null);m.options.__file="Bucket.vue";e["default"]=m.exports},"3bfc":function(t,e,n){"use strict";var r=n("713b"),u=n.n(r);u.a},"713b":function(t,e,n){},7265:function(t,e,n){"use strict";n.d(e,"n",function(){return u}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"o",function(){return f}),n.d(e,"p",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"h",function(){return b}),n.d(e,"i",function(){return k}),n.d(e,"f",function(){return B}),n.d(e,"j",function(){return v}),n.d(e,"l",function(){return g}),n.d(e,"k",function(){return C}),n.d(e,"a",function(){return M}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return l}),n.d(e,"q",function(){return h}),n.d(e,"m",function(){return c});n("28a5"),n("6b54"),n("a481");var r=n("2b0e"),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=i(t,e);return n[0]+" "+n[1]},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t;if("number"!==typeof n&&(n=parseFloat(n)),n<1)return"0 s";if(isNaN(n)||!isFinite(n))return"-";var r=["s","min","h"],u=Math.min(Math.floor(Math.log(n)/Math.log(60)),r.length-1),i=(n/Math.pow(60,Math.floor(u))).toFixed(e);return[i,r[u]]},c=function(t){return"".concat(t).replace(/\d{1,3}(?=(\d{3})+$)/g,function(t){return t+","})},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(void 0===t)return"-";var n=o(t,e);return n[0]+" "+n[1]},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t;if("number"!==typeof n&&(n=parseFloat(n)),n<1)return"0 B";if(isNaN(n)||!isFinite(n))return"-";var r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u=Math.min(Math.floor(Math.log(n)/Math.log(1024)),r.length-1),i=(n/Math.pow(1024,Math.floor(u))).toFixed(e);return[i,r[u]]},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(void 0===t)return"-";var n=l(t,e);return n[0]+" "+n[1]},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t;if("number"!==typeof n&&(n=parseFloat(n)),n<1)return"0 bps";if(isNaN(n)||!isFinite(n))return"-";var r=["bps","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps","Ybps"],u=Math.min(Math.floor(Math.log(n)/Math.log(1024)),r.length-1),i=(n/Math.pow(1024,Math.floor(u))).toFixed(e);return[i,r[u]]},f=function(t){var e=t;if(void 0===e)return"-";e="string"===typeof e?e:e.toString();var n=e.length;if(n<3)return e;for(var r=n%3===0?e.substr(0,n%3):e.substr(0,n%3)+",",u=n%3;u<n-1;u+=3)r+=u===n-3?e.substr(u,3):e.substr(u,3)+",";return r},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t;if("number"!==typeof n&&(n=parseFloat(n)),n<1)return 0;if(isNaN(n)||!isFinite(n))return"-";var r=["","K","M","BN"],u=Math.min(Math.floor(Math.log(n)/Math.log(1e3)),r.length-1),i=(n/Math.pow(1e3,Math.floor(u))).toFixed(e);return i+" "+r[u]},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t;if("number"!==typeof n&&(n=parseFloat(n)),n<1)return[0];if(isNaN(n)||!isFinite(n))return["-"];var r=["","K","M","BN"],u=Math.min(Math.floor(Math.log(n)/Math.log(1e3)),r.length-1),i=r[u]?e:0,c=(n/Math.pow(1e3,Math.floor(u))).toFixed(i);return[c,r[u]]},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YMD",n=new Date(t),r=[n.getFullYear(),m(n.getMonth()+1),m(n.getDate())];return"MD"===e&&(r=[m(n.getMonth()+1),m(n.getDate())]),r.join("-")},b=function(t){var e=new Date(t),n=[m(e.getMonth()+1),m(e.getDate())],r=[m(e.getHours()),m(e.getMinutes())];return n.join("-")+" "+r.join(":")},k=function(t){var e=new Date(t),n=[e.getFullYear(),m(e.getMonth()+1),m(e.getDate())],r=[m(e.getHours()),m(e.getMinutes())];return n.join("-")+" "+r.join(":")},m=function(t){return t>9?t:"0"+t},g=function(t,e){return t.splice(t.indexOf(e),1)};r["default"].filter("userType",function(t){return t.URI&&"http://acs.amazonaws.com/groups/global/AllUsers"===t.URI?"All Users":"CanonicalUser"===t.Type||t.URI&&"http://acs.amazonaws.com/groups/global/AuthenticatedUsers"===t.URI?"Auth Users":t.ID?t.ID:void 0});var v=function(t,e){return t.slice(e.length)},B=function(t){if(t){var e=t.split("/"),n=[];return e.pop(),_.each(e,function(t,r){var u=_.clone(e);u.length=r+1,n.push({text:t,prefix:u.join("/")+"/"})}),n}return[]},C={overlay:"imgx/overlay/",rules:"imgx/cmd_template/"},M=function(t){var e=["",0,t.length,"","",""],n=e[0],r=e[1],u=e[2],i=e[3],c=e[4],a=e[5];while(r<u)switch(i=t[r++],i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(i);break;case 12:case 13:c=t[r++],n+=String.fromCharCode((31&i)<<6|63&c);break;case 14:c=t[r++],a=t[r++],n+=String.fromCharCode((15&i)<<12|(63&c)<<6|(63&a)<<0);break}return n}},"752a":function(t,e,n){"use strict";n.d(e,"t",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"u",function(){return d}),n.d(e,"c",function(){return h}),n.d(e,"f",function(){return p}),n.d(e,"g",function(){return b}),n.d(e,"h",function(){return k}),n.d(e,"v",function(){return m}),n.d(e,"l",function(){return g}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return B}),n.d(e,"s",function(){return C}),n.d(e,"r",function(){return M}),n.d(e,"o",function(){return E}),n.d(e,"n",function(){return _}),n.d(e,"m",function(){return D}),n.d(e,"k",function(){return O}),n.d(e,"e",function(){return w}),n.d(e,"a",function(){return x}),n.d(e,"b",function(){return y}),n.d(e,"i",function(){return A}),n.d(e,"d",function(){return N}),n.d(e,"y",function(){return R}),n.d(e,"A",function(){return T}),n.d(e,"x",function(){return S}),n.d(e,"z",function(){return $}),n.d(e,"w",function(){return L});var r=n("dd1f"),u="".concat(location.protocol,"//"),i="/v2/",c="/2012-09-25/",a=function(t){return u+r["a"].apiHost+i+t},o=function(t){return u+r["a"].transcoderHOST+c+t},s=function(t){return u+r["a"].imgxHOST+t},l=a("superuser/redirect/bucket"),f=a("node/list"),d=(a("list/partition"),a("user/list/sub")),h=(a("user/create/sub_user"),a("user/list/sub_acl"),a("user/update/sub_acl"),a("user/create/user"),a("user/list/bound_user")),p=(a("user/list/user"),a("user/bind/user"),a("user/unbind/user"),a("group/list")),b=a("group/move"),k=a("group/read_only"),m=a("traffic/list"),g=a("partition/used/stats"),v=a("partition/used/detail"),B=a("partition/used/list"),C=a("partition/used/set"),M=a("partition/used/move"),E=a("partition/used/delete"),_=a("partition/unused/list"),D=a("partition/unused/add"),O=a("partition/deleted/list"),w=a("retrieve"),x=a("access"),y=a("user/add/service"),A=s("/image-example/"),N=a("custom_domain"),R=function(t){return a("bill/transcode".concat(t))},T=function(t){return o(t)},S=function(t){return a("bill/storage_old".concat(t))},$=function(t){return a("bill/storage".concat(t))},L=function(t){return a("bill/storage_bandwidth".concat(t))}},f1ae:function(t,e,n){"use strict";var r=n("86cc"),u=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,u(0,n)):t[e]=n}}}]);