(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bd62cb7"],{3542:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"7ef3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bsc-template-edit bsc-edit"},[a("div",{staticClass:"layout-bsc-toolbar"},[a("Breadcrumb",[a("Breadcrumb-item",{attrs:{href:"/video/template"}},[e._v(e._s(e.$t("VIDEO.TEMPLATE_CONFIGURATION")))]),a("Breadcrumb-item",[e._v(e._s(e.$t("VIDEO.NEW_TEMPLATE")))])],1)],1),a("Form",{ref:"basicValidate",attrs:{model:e.template,rules:e.ruleValidate,"label-width":175}},[a("div",{staticClass:"separator-line"}),a("div",{staticClass:"editBlock"},[a("div",{staticClass:"section-separator"},[a("div",{staticClass:"separator-body"},[a("span",{staticClass:"separator-icon"}),a("span",{staticClass:"separator-info"},[e._v(e._s(e.$t("VIDEO.BASE_INFO")))])])]),a("div",{staticClass:"form-item"},[a("FormItem",{attrs:{label:e.$t("VIDEO.TEMPLATE_NAME"),prop:"Name",required:""}},[a("Input",{staticClass:"line-width",attrs:{placeholder:e.$t("VIDEO.TEMPLATE_NAME")},model:{value:e.template.Name,callback:function(t){e.$set(e.template,"Name",t)},expression:"template.Name"}})],1)],1),a("div",{staticClass:"form-item"},[a("FormItem",{attrs:{label:e.$t("VIDEO.TEMPLATE_DESCRIPTION"),prop:"Description"}},[a("Input",{staticClass:"line-width",attrs:{placeholder:e.$t("VIDEO.ENTER_THE_TEMPLATE_DESCRIPTION_TEXT"),type:"textarea",autosize:!0},model:{value:e.template.Description,callback:function(t){e.$set(e.template,"Description",t)},expression:"template.Description"}})],1)],1),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.PACKAGE_FORMAT"))+" : ")]),a("Radio-group",{on:{"on-change":e.containerChange},model:{value:e.template.Container,callback:function(t){e.$set(e.template,"Container",t)},expression:"template.Container"}},e._l(e.containerList,function(t){return a("Radio",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1),"mp4"===e.template.Container?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v("FastStart : ")]),a("i-switch",{model:{value:e.template.FastStart,callback:function(t){e.$set(e.template,"FastStart",t)},expression:"template.FastStart"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("VIDEO.ON")))]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("VIDEO.OFF")))])])],1):e._e()])]),a("div",{staticClass:"separator-line"}),a("div",{staticClass:"editBlock"},[a("div",{staticClass:"section-separator"},[a("div",{staticClass:"separator-body"},[a("span",{staticClass:"separator-icon"}),a("span",{staticClass:"separator-info"},[e._v(e._s(e.$t("VIDEO.VIDEO_PARAMETER_CONFIGURATION")))])])]),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.ENCODING"))+" : ")]),a("Radio-group",{model:{value:e.template.Video.Codec,callback:function(t){e.$set(e.template.Video,"Codec",t)},expression:"template.Video.Codec"}},e._l(e.videoCodecList,function(t){return t.container.includes(e.template.Container)?a("Radio",{key:t.value,attrs:{disabled:e.videoDisabled,label:t.value}},[e._v(e._s(t.name))]):e._e()}))],1),"H.264"===e.template.Video.Codec?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.CODING_PROFILE"))+" : ")]),a("Radio-group",{model:{value:e.template.Video.CodecOptions.Profile,callback:function(t){e.$set(e.template.Video.CodecOptions,"Profile",t)},expression:"template.Video.CodecOptions.Profile"}},e._l(e.videoProfileList,function(t){return a("Radio",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1):e._e(),"H.264"===e.template.Video.Codec?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.CODING_LEVEL"))+" : ")]),a("Radio-group",{model:{value:e.template.Video.CodecOptions.Level,callback:function(t){e.$set(e.template.Video.CodecOptions,"Level",t)},expression:"template.Video.CodecOptions.Level"}},e._l(e.videoLevelList,function(t){return a("Radio",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1):e._e(),"H.264"===e.template.Video.Codec||"H.265"===e.template.Video.Codec?a("div",{staticClass:"form-item"},[a("Form",{ref:"videoValidate",attrs:{model:e.template.Video,rules:e.ruleValidate,"label-width":5,inline:""}},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.FIXED_KEY_FRAME_SPACING"))+" : ")]),a("i-switch",{model:{value:e.template.Video.FixedGOP,callback:function(t){e.$set(e.template.Video,"FixedGOP",t)},expression:"template.Video.FixedGOP"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v(e._s(e.$t("VIDEO.ON")))]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v(e._s(e.$t("VIDEO.OFF")))])]),a("FormItem",{attrs:{prop:"KeyframesMaxDist"}},[a("InputNumber",{attrs:{disabled:!e.template.Video.FixedGOP},model:{value:e.template.Video.KeyframesMaxDist,callback:function(t){e.$set(e.template.Video,"KeyframesMaxDist",t)},expression:"template.Video.KeyframesMaxDist"}}),e._v(" "+e._s(e.$t("VIDEO.SECOND"))+" (1~100000)\n        ")],1)],1)],1):e._e(),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.BIT_RATE"))+" : ")]),a("Radio-group",{model:{value:e.auxiliary.videoBitRate,callback:function(t){e.$set(e.auxiliary,"videoBitRate",t)},expression:"auxiliary.videoBitRate"}},[a("Radio",{attrs:{label:"auto",disabled:e.videoDisabled}},[e._v(e._s(e.$t("VIDEO.ADAPTIVE")))]),a("Radio",{attrs:{label:"value",disabled:e.videoDisabled}},[e._v(e._s(e.$t("VIDEO.USER_DEFINED")))])],1),a("InputNumber",{attrs:{min:1,disabled:"auto"===e.auxiliary.videoBitRate},model:{value:e.auxiliary.videoBitRateValue,callback:function(t){e.$set(e.auxiliary,"videoBitRateValue",t)},expression:"auxiliary.videoBitRateValue"}}),e._v(" Kbps\n    ")],1),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.FRAME_RATE"))+" : ")]),a("Select",{staticClass:"line-width",attrs:{disabled:e.videoDisabled},model:{value:e.template.Video.FrameRate,callback:function(t){e.$set(e.template.Video,"FrameRate",t)},expression:"template.Video.FrameRate"}},e._l(e.videoFrameRateList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1),"auto"!==e.template.Video.Codec?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.RESOLUTION"))+" : ")]),a("Radio-group",{model:{value:e.auxiliary.resolution,callback:function(t){e.$set(e.auxiliary,"resolution",t)},expression:"auxiliary.resolution"}},[a("Radio",{attrs:{label:"auto"}},[e._v(e._s(e.$t("VIDEO.UNALTERED")))]),a("Radio",{attrs:{label:"value"}},[e._v(e._s(e.$t("VIDEO.USER_DEFINED"))+"\n          "),a("InputNumber",{attrs:{min:1,disabled:!("value"===e.auxiliary.resolution),placeholder:e.$t("VIDEO.WIDTH")},model:{value:e.auxiliary.width,callback:function(t){e.$set(e.auxiliary,"width",t)},expression:"auxiliary.width"}}),a("InputNumber",{attrs:{min:1,disabled:!("value"===e.auxiliary.resolution),placeholder:e.$t("VIDEO.HEIGHT")},model:{value:e.auxiliary.height,callback:function(t){e.$set(e.auxiliary,"height",t)},expression:"auxiliary.height"}})],1),a("Radio",{attrs:{label:"only_width"}},[e._v("\n          "+e._s(e.$t("VIDEO.HIGHLY_ADAPTIVE"))+"\n          "),a("InputNumber",{attrs:{min:1,disabled:!("only_width"===e.auxiliary.resolution),placeholder:e.$t("VIDEO.WIDTH")},model:{value:e.auxiliary.only_width,callback:function(t){e.$set(e.auxiliary,"only_width",t)},expression:"auxiliary.only_width"}})],1),a("Radio",{attrs:{label:"only_height"}},[e._v("\n          "+e._s(e.$t("VIDEO.WIDTH_ADAPTIVE"))+"\n          "),a("InputNumber",{attrs:{min:1,disabled:!("only_height"===e.auxiliary.resolution),placeholder:e.$t("VIDEO.HEIGHT")},model:{value:e.auxiliary.only_height,callback:function(t){e.$set(e.auxiliary,"only_height",t)},expression:"auxiliary.only_height"}})],1)],1)],1):e._e(),"auto"!==e.template.Video.Codec?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.ASPECT_RATIO"))+" : ")]),a("Radio-group",{model:{value:e.template.Video.AspectRatio,callback:function(t){e.$set(e.template.Video,"AspectRatio",t)},expression:"template.Video.AspectRatio"}},e._l(e.aspectRatioList,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])}))],1):e._e()]),a("div",{staticClass:"separator-line"}),a("div",{staticClass:"editBlock"},[a("div",{staticClass:"section-separator"},[a("div",{staticClass:"separator-body"},[a("span",{staticClass:"separator-icon"}),a("span",{staticClass:"separator-info"},[e._v(e._s(e.$t("VIDEO.AUDIO_PARAMETER_CONFIGURATION")))])])]),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.ENCODING"))+" : ")]),a("Radio-group",{model:{value:e.template.Audio.Codec,callback:function(t){e.$set(e.template.Audio,"Codec",t)},expression:"template.Audio.Codec"}},e._l(e.audioCodecList,function(t){return t.container.includes(e.template.Container)?a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))]):e._e()}))],1),"AAC"===e.template.Audio.Codec?a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.CODING_QUALITY"))+" : ")]),a("Radio-group",{model:{value:e.template.Audio.CodecOptions.Profile,callback:function(t){e.$set(e.template.Audio.CodecOptions,"Profile",t)},expression:"template.Audio.CodecOptions.Profile"}},e._l(e.audioProfileList,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])}))],1):e._e(),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.SAMPLE_RATE"))+"(HZ) : ")]),a("Radio-group",{model:{value:e.template.Audio.SampleRate,callback:function(t){e.$set(e.template.Audio,"SampleRate",t)},expression:"template.Audio.SampleRate"}},e._l(e.audioSampleRateList,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])}))],1),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.BIT_RATE"))+" : ")]),a("Radio-group",{model:{value:e.auxiliary.audioBitRate,callback:function(t){e.$set(e.auxiliary,"audioBitRate",t)},expression:"auxiliary.audioBitRate"}},[a("Radio",{attrs:{label:"auto"}},[e._v(e._s(e.$t("VIDEO.ADAPTIVE")))]),a("Radio",{attrs:{label:"value"}},[e._v(e._s(e.$t("VIDEO.USER_DEFINED")))])],1),a("Slider",{staticClass:"my-slider",attrs:{min:64,max:320,disabled:"auto"===e.auxiliary.audioBitRate},model:{value:e.auxiliary.audioBitRateValue,callback:function(t){e.$set(e.auxiliary,"audioBitRateValue",t)},expression:"auxiliary.audioBitRateValue"}}),a("InputNumber",{attrs:{min:64,max:320,disabled:"auto"===e.auxiliary.audioBitRate},model:{value:e.auxiliary.audioBitRateValue,callback:function(t){e.$set(e.auxiliary,"audioBitRateValue",t)},expression:"auxiliary.audioBitRateValue"}})],1),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("VIDEO.CHANNELS"))+" : ")]),a("Select",{staticClass:"line-width",model:{value:e.template.Audio.Channels,callback:function(t){e.$set(e.template.Audio,"Channels",t)},expression:"template.Audio.Channels"}},e._l(e.audioChannelsList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1)]),a("div",{staticClass:"separator-line"}),a("div",{staticClass:"editBlock"},[e._m(0),a("p",{staticClass:"page-info"},[e._v("水印宽度或水印高度任意项为0都将使用图片本身大小")]),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v("水印宽度 : ")]),a("div",{staticClass:"input-text-box"},[a("InputNumber",{model:{value:e.template.WatermarkConfig.Width,callback:function(t){e.$set(e.template.WatermarkConfig,"Width",t)},expression:"template.WatermarkConfig.Width"}}),a("span",[e._v("px")])],1)]),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v("水印高度 : ")]),a("div",{staticClass:"input-text-box"},[a("InputNumber",{model:{value:e.template.WatermarkConfig.Height,callback:function(t){e.$set(e.template.WatermarkConfig,"Height",t)},expression:"template.WatermarkConfig.Height"}}),a("span",[e._v("px")])],1)]),a("div",{staticClass:"form-item"},[a("span",{staticClass:"form-label"},[e._v(e._s(e.$t("STORAGE.WATERMARKER_POSITION"))+" : ")]),a("div",{staticClass:"gravity-selector"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"NorthWest",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"NorthWest")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","NorthWest")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"North",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"North")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","North")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"NorthEast",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"NorthEast")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","NorthEast")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"West",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"West")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","West")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"Center",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"Center")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","Center")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"East",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"East")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","East")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"SouthWest",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"SouthWest")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","SouthWest")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"South",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"South")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","South")}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.template.WatermarkConfig.Location,expression:"template.WatermarkConfig.Location"}],attrs:{type:"radio",value:"SouthEast",name:"location"},domProps:{checked:e._q(e.template.WatermarkConfig.Location,"SouthEast")},on:{change:function(t){e.$set(e.template.WatermarkConfig,"Location","SouthEast")}}})]),a("div",{staticClass:"padding-setting"},[a("div",{staticClass:"form-item"},[a("Tooltip",{attrs:{placement:"top-end"}},[a("span",{staticClass:"form-label"},[e._v("水平偏移 :  \n              "),a("Icon",{attrs:{type:"ios-help-outline"}})],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(e.$t("VIDEO.TIPS")))]),a("p",[e._v(e._s(e.$t("VIDEO.OFFSET_X_TIPS")))])])]),a("div",{staticClass:"input-text-box"},[a("InputNumber",{model:{value:e.template.WatermarkConfig.LocationHOffset,callback:function(t){e.$set(e.template.WatermarkConfig,"LocationHOffset",t)},expression:"template.WatermarkConfig.LocationHOffset"}}),a("span",[e._v("px")])],1)],1),a("div",{staticClass:"form-item"},[a("Tooltip",{attrs:{placement:"top-end"}},[a("span",{staticClass:"form-label"},[e._v("垂直偏移 : \n              "),a("Icon",{attrs:{type:"ios-help-outline"}})],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(e._s(e.$t("VIDEO.TIPS")))]),a("p",[e._v(e._s(e.$t("VIDEO.OFFSET_Y_TIPS")))])])]),a("div",{staticClass:"input-text-box"},[a("InputNumber",{model:{value:e.template.WatermarkConfig.LocationVOffset,callback:function(t){e.$set(e.template.WatermarkConfig,"LocationVOffset",t)},expression:"template.WatermarkConfig.LocationVOffset"}}),a("span",[e._v("px")])],1)],1)])])]),a("div",{staticClass:"separator-line"}),a("div",{staticClass:"editBlock"},[a("Button",{staticClass:"button-save",attrs:{type:"primary"},on:{click:e.beforeSubmit}},[e._v(e._s(e.$t("VIDEO.SAVE")))])],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-separator"},[a("div",{staticClass:"separator-body"},[a("span",{staticClass:"separator-icon"}),a("span",{staticClass:"separator-info"},[e._v("水印参数配置")])])])}],s=(a("5a09"),a("bc72"),a("84fb"),a("dccb"),a("63af"),a("9382"),a("b267")),n=a("ff66"),l=a("365c"),r={data:function(){return{videoDisabled:!1,template:_.cloneDeep(p),auxiliary:_.cloneDeep(u),containerList:["flv","gif","mp3","mp4","mpg","ts","wmv","wma","mp2"],videoCodecList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto",container:["flac","flv","mp3","mp4","mpg","ts","wmv","wma","mp2"]},{name:"gif",value:"gif",container:["gif"]},{name:"H.264",value:"H.264",container:["flv","mp4","ts"]},{name:"H.265",value:"H.265",container:["mp4","ts"]},{name:"mpeg2",value:"mpeg2",container:["mpg"]},{name:"msmpeg4",value:"msmpeg4",container:["wmv"]}],videoProfileList:["baseline","main","high"],videoLevelList:["3","3.1","3.2","4","4.1"],videoFrameRateList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto"},{name:"10",value:"10"},{name:"15",value:"15"},{name:"23.97",value:"23.97"},{name:"24",value:"24"},{name:"25",value:"25"},{name:"29.97",value:"29.97"},{name:"30",value:"30"},{name:"50",value:"50"},{name:"60",value:"60"}],aspectRatioList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto"},{name:"1:1",value:"1:1"},{name:"4:3",value:"4:3"},{name:"3:2",value:"3:2"},{name:"16:9",value:"16:9"}],audioCodecList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto",container:["flac","flv","gif","mp4","mpg","ts","wmv"]},{name:"AAC",value:"AAC",container:["mp4","ts","flv"]},{name:"mp3",value:"mp3",container:["flv","mp4","ts","mp3"]},{name:"mp2",value:"mp2",container:["mpg","mp2"]},{name:"wmav2",value:"wmav2",container:["wmv","wma"]}],audioProfileList:[{name:this.$t("VIDEO.ADAPTIVE"),value:"auto"},{name:"AAC-LC",value:"AAC-LC"},{name:"HE-AAC",value:"HE-AAC"},{name:"HE-AACv2",value:"HE-AACv2"}],audioSampleRateList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto"},{name:"22050",value:"22050"},{name:"32000",value:"32000"},{name:"44100",value:"44100"},{name:"48000",value:"48000"},{name:"96000",value:"96000"}],audioChannelsList:[{name:this.$t("VIDEO.UNALTERED"),value:"auto"},{name:"1",value:"1"},{name:"2",value:"2"},{name:"3",value:"3"},{name:"4",value:"4"},{name:"5",value:"5"},{name:"6",value:"6"},{name:"7",value:"7"},{name:"8",value:"8"},{name:"9",value:"9"},{name:"10",value:"10"},{name:"11",value:"11"},{name:"12",value:"12"},{name:"13",value:"13"},{name:"14",value:"14"},{name:"15",value:"15"},{name:"16",value:"16"}],ruleValidate:{Name:[{validator:this.validateName,trigger:"change"}],Description:[{validator:this.validateDiscription,trigger:"change"}],KeyframesMaxDist:[{validator:this.validateMaxDist,trigger:"change"}]}}},computed:{templateId:function(){return this.$route.params.id}},created:function(){this.readPreset()},methods:{beforeSubmit:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["basicValidate"].validate(function(e){e?t.template.Video.FixedGOP?t.$refs["videoValidate"]&&t.$refs["videoValidate"].validate(function(e){e?t.createPreset():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))}):t.createPreset():t.$Message.error(t.$t("PUBLIC.FORM_VALID_FAILED"))});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createPreset:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=c(this.template,this.auxiliary),e.prev=1,this.$Loading.start(),"none"!==this.templateId){e.next=9;break}return e.next=6,Object(l["W"])("presets",t);case 6:this.$Message.success(this.$t("VIDEO.CREATED_SUCCESSFULLY")),e.next=13;break;case 9:return delete t.Id,e.next=12,Object(l["Z"])("presets/".concat(this.templateId),t);case 12:this.$Message.success(this.$t("VIDEO.UPDATED_SUCCESSFULLY"));case 13:this.$Loading.finish(),this.$router.push({name:"template"}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),this.$Loading.error();case 20:case"end":return e.stop()}},e,this,[[1,17]])}));return function(){return e.apply(this,arguments)}}(),readPreset:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("none"===this.templateId){e.next=17;break}return e.prev=1,this.$Loading.start(),e.next=5,Object(n["e"])("readPreset",{Id:this.templateId});case 5:t=e.sent,this.template=t.Preset,this.template.Video.FixedGOP="true"===t.Preset.Video.FixedGOP,this.template.FastStart="true"===t.Preset.FastStart,this.template.WatermarkConfig=t.Preset.WatermarkConfig?t.Preset.WatermarkConfig:d,this.auxiliary=m(t.Preset),this.$Loading.finish(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),this.$Loading.error();case 17:case"end":return e.stop()}},e,this,[[1,14]])}));return function(){return e.apply(this,arguments)}}(),containerChange:function(e){this.template.Video=_.cloneDeep(p.Video),this.template.Audio=_.cloneDeep(p.Audio),this.auxiliary.resolution="auto",this.auxiliary.audioBitRate="auto",v.includes(e)?(this.template.Video.Codec="auto",this.auxiliary.videoBitRate="auto",this.template.Video.FrameRate="auto",this.videoDisabled=!0,this.template.Audio.Codec=f[this.template.Container]):(this.videoDisabled=!1,this.template.Audio.Codec="auto",this.template.Video.Codec="gif"===e?"gif":"auto")},validateDiscription:function(e,t,a){new TextEncoder("utf-8").encode(t).length>100?a(new Error(this.$t("VIDEO.TEMPLATE_DESCRIPTION_CHAR_NUMBER"))):a()},validateName:function(e,t,a){t?new TextEncoder("utf-8").encode(t).length>20?a(new Error(this.$t("VIDEO.TEMPLATE_NAME_CHAR_NUMBER"))):a():a(new Error(this.$t("VIDEO.TEMPLATE_NAME_REQUIRED")))},validateMaxDist:function(e,t,a){Number(t)?t<1?a(new Error(this.$t("PUBLIC.NOT_LESS",{num:"1"}))):t>1e5?a(new Error(this.$t("PUBLIC.NOT_GREATER",{num:"100000"}))):a():a(new Error(this.$t("PUBLIC.NUM_PLEASE")))}}},m=function(e){var t=_.cloneDeep(u);if("auto"===e.Video.BitRate?t.videoBitRate="auto":(t.videoBitRate="value",t.videoBitRateValue=parseInt(e.Video.BitRate)),"auto"===e.Video.Resolution)t.resolution="auto";else{var a=e.Video.Resolution.split("x");"-2"===a[0]?(t.resolution="only_height",t.only_height=parseInt(a[1])):"-2"===a[1]?(t.resolution="only_width",t.only_width=parseInt(a[0])):(t.resolution="value",t.width=a[0],t.height=a[1])}return"auto"===e.Audio.BitRate?t.audioBitRate="auto":(t.audioBitRate="value",t.audioBitRateValue=parseInt(e.Audio.BitRate)),t},c=function(e,t){var a=_.cloneDeep(e);return"auto"!==t.videoBitRate?a.Video.BitRate=t.videoBitRateValue.toString():a.Video.BitRate=t.videoBitRate,"auto"!==t.resolution?"only_width"===t.resolution?a.Video.Resolution="".concat(t.only_width,"x-2"):"only_height"===t.resolution?a.Video.Resolution="-2x".concat(t.only_height):a.Video.Resolution="".concat(t.width,"x").concat(t.height):a.Video.Resolution=t.resolution,"auto"!==t.audioBitRate?a.Audio.BitRate=t.audioBitRateValue.toString():a.Audio.BitRate=t.audioBitRate,a.FastStart=e.FastStart.toString(),a.Video.FixedGOP=e.Video.FixedGOP.toString(),a.Video.KeyframesMaxDist=e.Video.KeyframesMaxDist.toString(),a.WatermarkConfig.Height=e.WatermarkConfig.Height.toString(),a.WatermarkConfig.Width=e.WatermarkConfig.Width.toString(),a.WatermarkConfig.LocationHOffset=e.WatermarkConfig.LocationHOffset.toString(),a.WatermarkConfig.LocationVOffset=e.WatermarkConfig.LocationVOffset.toString(),a},u={videoBitRate:"auto",videoBitRateValue:1,resolution:"auto",width:"",height:"",only_width:1,only_height:1,audioBitRate:"auto",audioBitRateValue:64},d={Height:"0",Width:"0",Location:"NorthEast",LocationHOffset:"0",LocationVOffset:"0"},p={Name:"",Description:"",FastStart:!1,Container:"mp4",Audio:{Codec:"auto",CodecOptions:{Profile:"auto"},SampleRate:"auto",BitRate:"64",Channels:"auto"},Video:{Codec:"H.264",CodecOptions:{Profile:"high",Level:"3.1"},KeyframesMaxDist:"1",FixedGOP:!1,BitRate:"64",FrameRate:"auto",Resolution:"auto",AspectRatio:"auto"},WatermarkConfig:d},v=["flac","mp3","wma","mp2"],f={mp3:"mp3",wma:"wmav2",mp2:"mp2"},C=r,h=(a("9d95"),a("048f")),E=Object(h["a"])(C,i,o,!1,null,"1664cabd",null);E.options.__file="TemplateEdit.vue";t["default"]=E.exports},"84fb":function(e,t,a){"use strict";var i=a("53da"),o=a("7a57"),s=a("af55"),n=a("69d8"),l=a("4b3d"),r=a("cce3"),m=a("e853").f,c=a("8566").f,u=a("9a0d").f,d=a("d079").trim,p="Number",v=i[p],f=v,C=v.prototype,_=s(a("e177")(C))==p,h="trim"in String.prototype,E=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=h?t.trim():d(t,3);var a,i,o,s=t.charCodeAt(0);if(43===s||45===s){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+t}for(var n,r=t.slice(2),m=0,c=r.length;m<c;m++)if(n=r.charCodeAt(m),n<48||n>o)return NaN;return parseInt(r,i)}}return+t};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof v&&(_?r(function(){C.valueOf.call(a)}):s(a)!=p)?n(new f(E(t)),a,v):E(t)};for(var g,I=a("f711")?m(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),R=0;I.length>R;R++)o(f,g=I[R])&&!o(v,g)&&u(v,g,c(f,g));v.prototype=C,C.constructor=v,a("7e22")(i,p,v)}},"8f77":function(e,t,a){},"9d95":function(e,t,a){"use strict";var i=a("8f77"),o=a.n(i);o.a},d079:function(e,t,a){var i=a("8718"),o=a("5b8a"),s=a("cce3"),n=a("3542"),l="["+n+"]",r="​",m=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),u=function(e,t,a){var o={},l=s(function(){return!!n[e]()||r[e]()!=r}),m=o[e]=l?t(d):n[e];a&&(o[a]=m),i(i.P+i.F*l,"String",o)},d=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(m,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},e853:function(e,t,a){var i=a("6220"),o=a("bea0").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}}}]);